<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Logic Puzzle Master - Train your brain with 5+ unique logic puzzle games featuring interactive video tutorials. Number patterns, symbol decoder, equation puzzles, odd-one-out, and pattern grid deduction.">
    <meta name="keywords" content="logic puzzles, brain games, number patterns, symbol decoder, equation puzzles, odd one out, pattern recognition, brain training, puzzle games, free online games">
    <meta name="theme-color" content="#0f0c29">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Logic Puzzle">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#0f0c29">
    <meta name="msapplication-tap-highlight" content="no">
    <!-- Manifest will be dynamically generated -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%230f0c29' width='100' height='100' rx='20'/><text y='.9em' x='10' font-size='80'>ðŸ§©</text></svg>">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ§©</text></svg>">
    <title>Logic Puzzle Master - Brain Training Games with Interactive Tutorials</title>
    <style>
        /* ========================================================
           RESET & BASE STYLES
           ======================================================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* ========================================================
           SCREEN MANAGEMENT - Shows/hides different pages
           ======================================================== */
        .screen { display: none; animation: fadeIn 0.5s ease; }
        .screen.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 107, 107, 0.6); }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-40px) rotate(180deg); opacity: 0.6; }
        }
        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 2000px; }
        }
        @keyframes rotateIn {
            from { transform: rotate(0deg); }
            to { transform: rotate(180deg); }
        }

        /* ========================================================
           HEADER - Fixed navigation bar
           ======================================================== */
        .header {
            position: fixed;
            top: 0; left: 0; right: 0;
            z-index: 1000;
            padding: 1rem 5%;
            background: rgba(15, 12, 41, 0.95);
            backdrop-filter: blur(15px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .logo {
            font-size: clamp(1.1rem, 3vw, 1.6rem);
            font-weight: 800;
            background: linear-gradient(135deg, #ffd700, #ff6b6b, #667eea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }
        .nav-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }
        .nav-links a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            font-size: clamp(0.8rem, 2vw, 0.95rem);
        }
        .nav-links a:hover { color: #ffd700; }

        /* PWA Install Button - Header */
        .pwa-install-btn {
            display: none;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #ffd700, #ff6b6b);
            border: none;
            border-radius: 25px;
            color: #1a1a2e;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
            align-items: center;
            gap: 0.4rem;
        }
        .pwa-install-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        .pwa-install-btn.show {
            display: flex;
        }
        .pwa-install-btn svg {
            width: 16px;
            height: 16px;
        }

        /* PWA Install Banner - Home Page */
        .pwa-install-banner {
            display: none;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 1.5rem 2rem;
            margin: 2rem auto;
            max-width: 600px;
            text-align: center;
            animation: fadeIn 0.5s ease, glow 3s infinite;
        }
        .pwa-install-banner.show {
            display: block;
        }
        .pwa-install-banner h3 {
            color: #ffd700;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        .pwa-install-banner p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        .pwa-install-banner .install-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .pwa-install-banner .feature-tag {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.9);
        }
        .pwa-hero-install-btn {
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);
        }
        .pwa-hero-install-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 30px rgba(40, 167, 69, 0.5);
        }
        .pwa-hero-install-btn svg {
            width: 20px;
            height: 20px;
        }
        .pwa-dismiss-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
            cursor: pointer;
            margin-top: 0.8rem;
            transition: color 0.3s;
        }
        .pwa-dismiss-btn:hover {
            color: rgba(255, 255, 255, 0.8);
        }

        /* Offline indicator */
        .offline-indicator {
            display: none;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #ff6b6b, #ee5a5a);
            color: #fff;
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.9rem;
            z-index: 9999;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }
        .offline-indicator.show {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .offline-indicator.online {
            background: linear-gradient(135deg, #28a745, #20c997);
        }
        @keyframes slideUp {
            from { transform: translateX(-50%) translateY(100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        /* Update notification */
        .update-notification {
            display: none;
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff;
            padding: 1rem 1.5rem;
            border-radius: 15px;
            font-size: 0.9rem;
            z-index: 9998;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 90%;
            width: 350px;
        }
        .update-notification.show {
            display: block;
            animation: slideUp 0.3s ease;
        }
        .update-notification p {
            margin-bottom: 0.8rem;
        }
        .update-btn {
            background: #fff;
            color: #667eea;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 0.5rem;
            transition: transform 0.2s;
        }
        .update-btn:hover {
            transform: scale(1.05);
        }
        .update-dismiss {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .update-dismiss:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* ========================================================
           ANIMATED BACKGROUND - Floating particles effect
           ======================================================== */
        .bg-animated {
            position: fixed;
            width: 100%; height: 100%;
            overflow: hidden;
            z-index: -1;
            top: 0; left: 0;
        }
        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
        }
        .particle:nth-child(1) { width: 100px; height: 100px; left: 5%; top: 15%; animation-delay: 0s; }
        .particle:nth-child(2) { width: 70px; height: 70px; right: 10%; top: 40%; animation-delay: 3s; }
        .particle:nth-child(3) { width: 120px; height: 120px; left: 50%; bottom: 15%; animation-delay: 6s; }
        .particle:nth-child(4) { width: 50px; height: 50px; right: 25%; top: 65%; animation-delay: 9s; }
        .particle:nth-child(5) { width: 80px; height: 80px; left: 30%; top: 70%; animation-delay: 12s; }

        /* ========================================================
           HERO SECTION - Main landing area
           ======================================================== */
        .hero {
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 120px 5% 40px;
        }
        .hero h1 {
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff, #ffd700, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 3s infinite;
        }
        .hero p {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            color: rgba(255, 255, 255, 0.8);
            max-width: 700px;
            margin-bottom: 2rem;
        }
        .hero-btn {
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #ffd700, #ff6b6b);
            color: #1a1a2e;
            cursor: pointer;
            transition: all 0.3s;
            animation: bounce 2s infinite;
        }
        .hero-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4);
        }

        /* ========================================================
           MAIN GAMES SECTION - Primary game cards
           ======================================================== */
        .games-section {
            padding: 40px 5% 60px;
        }
        .section-title {
            text-align: center;
            font-size: clamp(1.5rem, 4vw, 2.2rem);
            margin-bottom: 2rem;
            color: #ffd700;
        }
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* ========================================================
           GAME CARDS - Clickable cards for each game
           ======================================================== */
        .game-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        .game-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            opacity: 0;
            transition: opacity 0.4s;
        }
        .game-card:hover {
            transform: translateY(-10px);
            border-color: #ffd700;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        .game-card:hover::before { opacity: 1; }
        .game-icon {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            display: block;
        }
        .game-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.8rem;
            color: #fff;
        }
        .game-card p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95rem;
        }
        .game-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        .badge-popular {
            background: linear-gradient(135deg, #ff6b6b, #ff8e53);
            color: #fff;
        }
        .badge-new {
            background: linear-gradient(135deg, #00c9ff, #92fe9d);
            color: #1a1a2e;
        }

        /* ========================================================
           MORE GAMES SECTION - Expandable area
           ======================================================== */
        .more-games-section {
            padding: 20px 5% 60px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .expand-btn {
            width: 100%;
            padding: 1.2rem 2rem;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 15px;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s;
        }
        .expand-btn:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.5), rgba(118, 75, 162, 0.5));
            border-color: #ffd700;
        }
        .expand-icon {
            font-size: 1.5rem;
            transition: transform 0.3s;
        }
        .expand-btn.expanded .expand-icon {
            transform: rotate(180deg);
        }
        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.3s;
        }
        .expandable-content.show {
            max-height: 2000px;
            padding-top: 2rem;
        }
        .more-games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        /* ========================================================
           COMING SOON CARDS - Locked future games
           ======================================================== */
        .coming-soon-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        .coming-soon-card:hover {
            border-color: rgba(255, 215, 0, 0.5);
            background: rgba(255, 255, 255, 0.05);
        }
        .coming-soon-card .game-icon {
            opacity: 0.5;
            filter: grayscale(50%);
        }
        .coming-soon-card h3 {
            color: rgba(255, 255, 255, 0.6);
        }
        .lock-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
            opacity: 0.8;
        }
        .coming-soon-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        /* ========================================================
           MODAL - Preview popup for coming soon games
           ======================================================== */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            animation: fadeIn 0.3s;
        }
        .modal-overlay.active { display: flex; }
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #2d2d44);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 2px solid rgba(255, 215, 0, 0.3);
            position: relative;
        }
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        .modal-close:hover { opacity: 1; }
        .modal-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        .modal-content h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #ffd700;
        }
        .modal-content p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }
        .modal-features {
            text-align: left;
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
        }
        .modal-features li {
            padding: 0.5rem 0;
            color: rgba(255, 255, 255, 0.7);
            list-style: none;
        }
        .modal-features li::before {
            content: 'âœ¨ ';
        }
        .notify-btn {
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 25px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .notify-btn:hover { transform: scale(1.05); }

        /* ========================================================
           BENEFITS SECTION - Why play section
           ======================================================== */
        .benefits-section {
            padding: 60px 5%;
            background: rgba(0, 0, 0, 0.2);
        }
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 2rem auto 0;
        }
        .benefit-item {
            text-align: center;
            padding: 1.5rem;
        }
        .benefit-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .benefit-item h4 {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #ffd700;
        }
        .benefit-item p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        /* ========================================================
           FOOTER - Bottom section
           ======================================================== */
        .footer {
            padding: 2rem 5%;
            background: rgba(0, 0, 0, 0.3);
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .footer p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer-links a:hover { color: #ffd700; }

        /* ========================================================
           GAME SCREEN STYLES - Individual game pages
           ======================================================== */
        .game-screen {
            padding: 100px 5% 60px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.7rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 25px;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 2rem;
        }
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .game-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .game-title {
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            color: #ffd700;
            margin-bottom: 0.5rem;
        }
        .game-subtitle {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
        }

        /* Info Panels - Instructions, objectives, hints */
        .info-panel {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid #667eea;
        }
        .info-panel h3 {
            font-size: 1.1rem;
            color: #ffd700;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .info-panel p, .info-panel li {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            line-height: 1.7;
        }
        .info-panel ul, .info-panel ol {
            padding-left: 1.5rem;
        }
        .info-panel li { margin-bottom: 0.5rem; }
        .hints-panel {
            border-left-color: #ff6b6b;
        }
        .objectives-panel {
            border-left-color: #28a745;
        }

        /* ========================================================
           PUZZLE BOARD - Game play area
           ======================================================== */
        .puzzle-container {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }
        .puzzle-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 1.5rem 0;
        }
        .puzzle-item {
            min-width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 10px;
            font-size: 1.3rem;
            font-weight: 700;
            padding: 0 15px;
        }
        .puzzle-item.mystery {
            background: linear-gradient(135deg, #ffd700, #ff6b6b);
            color: #1a1a2e;
            animation: pulse 1.5s infinite;
        }
        .answer-input {
            padding: 0.8rem 1.5rem;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            text-align: center;
            width: 150px;
            margin: 1rem 0;
        }
        .answer-input:focus {
            outline: none;
            border-color: #ffd700;
        }
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1.5rem;
        }
        .game-btn {
            padding: 0.9rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .check-btn {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: #fff;
        }
        .restart-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: #fff;
        }
        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        /* Feedback Messages */
        .feedback {
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-top: 1.5rem;
            font-weight: 600;
            display: none;
        }
        .feedback.show { display: block; }
        .feedback.win {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid #28a745;
            color: #28a745;
            animation: pulse 0.5s;
        }
        .feedback.lose {
            background: rgba(220, 53, 69, 0.2);
            border: 2px solid #dc3545;
            color: #dc3545;
            animation: shake 0.5s;
        }

        /* ========================================================
           VIDEO TUTORIAL SIMULATOR - Fake video player
           ======================================================== */
        .video-section {
            margin-top: 2.5rem;
        }
        .video-section h3 {
            font-size: 1.3rem;
            color: #ffd700;
            margin-bottom: 1rem;
            text-align: center;
        }
        .video-player {
            background: #0a0a15;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }
        .video-header {
            background: linear-gradient(135deg, #2d2d44, #1a1a2e);
            padding: 0.6rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .video-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .video-dot.red { background: #ff5f57; }
        .video-dot.yellow { background: #febc2e; }
        .video-dot.green { background: #28c840; }
        .video-title {
            flex: 1;
            text-align: center;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }
        .video-canvas {
            position: relative;
            min-height: 280px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }
        .play-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s;
        }
        .play-overlay:hover { background: rgba(0, 0, 0, 0.4); }
        .play-overlay.hidden { display: none; }
        .play-circle {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #ff6b6b, #ffd700);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }
        .play-circle:hover { transform: scale(1.1); }
        .play-triangle {
            width: 0;
            height: 0;
            border-left: 25px solid #1a1a2e;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            margin-left: 5px;
        }
        .video-controls {
            background: linear-gradient(135deg, #2d2d44, #1a1a2e);
            padding: 0.8rem 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .control-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .control-btn:hover { opacity: 1; }
        .progress-bar {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff6b6b);
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s linear;
        }
        .time-display {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
            min-width: 80px;
            text-align: right;
        }

        /* Tutorial Demo Content */
        .tutorial-content {
            width: 100%;
            text-align: center;
        }
        .tutorial-step {
            font-size: 0.8rem;
            color: #ffd700;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .tutorial-caption {
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 1rem;
            min-height: 30px;
        }
        .tutorial-demo {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .demo-items {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 1rem 0;
        }
        .demo-item {
            min-width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #667eea;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            padding: 0 12px;
            transition: all 0.3s;
        }
        .demo-item.highlight {
            background: linear-gradient(135deg, #ffd700, #ff6b6b);
            color: #1a1a2e;
            transform: scale(1.15);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        .demo-item.solved {
            background: #28a745;
        }
        .demo-arrow {
            font-size: 1.5rem;
            color: #ffd700;
            animation: bounce 1s infinite;
        }
        .tutorial-hint {
            background: rgba(255, 107, 107, 0.2);
            border-left: 3px solid #ff6b6b;
            padding: 0.8rem 1rem;
            border-radius: 0 8px 8px 0;
            margin-top: 1rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
        }
        .tutorial-hint::before {
            content: 'ðŸ’¡ Hint: ';
            font-weight: 600;
            color: #ffd700;
        }

        /* ========================================================
           GRID PUZZLE SPECIFIC STYLES
           ======================================================== */
        .grid-container {
            display: inline-block;
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 15px;
        }
        .puzzle-grid {
            display: grid;
            gap: 8px;
        }
        .grid-cell {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .grid-cell:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #ffd700;
        }
        .grid-cell.marked {
            background: linear-gradient(135deg, #28a745, #20c997);
            border-color: #28a745;
        }
        .grid-cell.crossed {
            background: rgba(220, 53, 69, 0.3);
            border-color: #dc3545;
        }
        .clue-box {
            background: rgba(102, 126, 234, 0.2);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: left;
        }
        .clue-item {
            padding: 0.5rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.95rem;
        }

        /* ========================================================
           SYMBOL DECODER SPECIFIC STYLES
           ======================================================== */
        .symbol-equation {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 0.8rem;
        }
        .symbol-item {
            font-size: 1.8rem;
        }
        .symbol-input {
            width: 60px;
            padding: 0.5rem;
            font-size: 1.1rem;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }
        .symbol-input:focus {
            outline: none;
            border-color: #ffd700;
        }

        /* ========================================================
           ODD ONE OUT SPECIFIC STYLES
           ======================================================== */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            max-width: 400px;
            margin: 1.5rem auto;
        }
        .option-btn {
            padding: 1.2rem 1rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #ffd700;
            transform: translateY(-3px);
        }
        .option-btn.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-color: #667eea;
        }
        .option-btn.correct {
            background: linear-gradient(135deg, #28a745, #20c997);
            border-color: #28a745;
        }
        .option-btn.wrong {
            background: rgba(220, 53, 69, 0.3);
            border-color: #dc3545;
        }

        /* ========================================================
           GAME 6: PATH FINDER MAZE STYLES
           ======================================================== */
        .maze-grid {
            display: grid;
            gap: 4px;
            justify-content: center;
            margin: 1.5rem auto;
        }
        .maze-cell {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }
        .maze-cell:hover { background: rgba(255, 255, 255, 0.2); }
        .maze-cell.start { background: linear-gradient(135deg, #28a745, #20c997); }
        .maze-cell.end { background: linear-gradient(135deg, #ffd700, #ff6b6b); }
        .maze-cell.path { background: rgba(102, 126, 234, 0.5); border-color: #667eea; }
        .maze-cell.wall { background: rgba(0, 0, 0, 0.5); cursor: not-allowed; }
        .maze-cell.current { animation: pulse 0.5s infinite; box-shadow: 0 0 15px #ffd700; }

        /* ========================================================
           GAME 7: WORD DEDUCTION STYLES
           ======================================================== */
        .word-grid {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
            margin: 1.5rem 0;
        }
        .word-row {
            display: flex;
            gap: 8px;
        }
        .letter-cell {
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            text-transform: uppercase;
            transition: all 0.3s;
        }
        .letter-cell.correct { background: #28a745; border-color: #28a745; }
        .letter-cell.present { background: #ffc107; border-color: #ffc107; color: #1a1a2e; }
        .letter-cell.absent { background: rgba(100, 100, 100, 0.5); border-color: #666; }
        .letter-cell.active { border-color: #ffd700; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
            margin-top: 1.5rem;
        }
        .keyboard-row {
            display: flex;
            gap: 6px;
        }
        .key-btn {
            min-width: 35px;
            height: 45px;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            padding: 0 12px;
        }
        .key-btn:hover { background: rgba(255, 255, 255, 0.25); }
        .key-btn.correct { background: #28a745; }
        .key-btn.present { background: #ffc107; color: #1a1a2e; }
        .key-btn.absent { background: rgba(60, 60, 60, 0.8); }
        .key-btn.wide { min-width: 60px; }

        /* ========================================================
           GAME 8: MEMORY SEQUENCE STYLES
           ======================================================== */
        .memory-board {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 300px;
            margin: 1.5rem auto;
        }
        .memory-btn {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 15px;
            border: 3px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.2s;
            opacity: 0.6;
        }
        .memory-btn:hover { opacity: 0.8; transform: scale(1.02); }
        .memory-btn.active { opacity: 1; transform: scale(1.05); box-shadow: 0 0 30px currentColor; }
        .memory-btn.red { background: #e74c3c; }
        .memory-btn.blue { background: #3498db; }
        .memory-btn.green { background: #2ecc71; }
        .memory-btn.yellow { background: #f1c40f; }
        .memory-btn:disabled { cursor: not-allowed; }
        .memory-status {
            text-align: center;
            font-size: 1.2rem;
            margin: 1rem 0;
            min-height: 30px;
        }
        .memory-level {
            font-size: 1.5rem;
            color: #ffd700;
            font-weight: 700;
        }

        /* ========================================================
           GAME 9: COLOR PATTERN ROTATION STYLES
           ======================================================== */
        .pattern-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 2rem;
            margin: 1.5rem 0;
        }
        .pattern-box {
            text-align: center;
        }
        .pattern-box h4 {
            margin-bottom: 0.8rem;
            color: #ffd700;
        }
        .rotation-grid {
            display: grid;
            gap: 5px;
        }
        .color-tile {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }
        .color-tile:hover { transform: scale(1.1); }
        .color-tile.c1 { background: #e74c3c; }
        .color-tile.c2 { background: #3498db; }
        .color-tile.c3 { background: #2ecc71; }
        .color-tile.c4 { background: #9b59b6; }
        .target-grid .color-tile { cursor: default; }
        .target-grid .color-tile:hover { transform: none; }
        .rotation-hint {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 0.5rem;
        }

        /* ========================================================
           GAME 10: LOGIC GRID DETECTIVE STYLES
           ======================================================== */
        .detective-grid {
            display: grid;
            gap: 2px;
            background: rgba(255, 255, 255, 0.1);
            padding: 2px;
            border-radius: 10px;
            margin: 1.5rem auto;
            width: fit-content;
        }
        .detective-cell {
            width: 45px;
            height: 45px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .detective-cell:hover { background: rgba(255, 255, 255, 0.2); }
        .detective-cell.header {
            background: rgba(102, 126, 234, 0.3);
            font-weight: 600;
            font-size: 0.8rem;
            cursor: default;
        }
        .detective-cell.yes { background: #28a745; }
        .detective-cell.no { background: rgba(220, 53, 69, 0.5); }
        .clue-list {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 1rem;
            margin: 1rem 0;
            text-align: left;
        }
        .clue-list li {
            padding: 0.5rem 0;
            color: rgba(255, 255, 255, 0.9);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .clue-list li:last-child { border-bottom: none; }

        /* ========================================================
           RESPONSIVE DESIGN - Mobile & Tablet adjustments
           ======================================================== */
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero { padding: 100px 5% 30px; min-height: 50vh; }
            .games-section { padding: 30px 5% 40px; }
            .game-screen { padding: 80px 4% 40px; }
            .puzzle-container { padding: 1.5rem; }
            .puzzle-item { min-width: 40px; height: 40px; font-size: 1.1rem; }
            .grid-cell { width: 50px; height: 50px; font-size: 1.2rem; }
            .options-grid { grid-template-columns: 1fr; }
            .video-canvas { min-height: 250px; }
            .info-panel { padding: 1rem; }
            .btn-group { flex-direction: column; align-items: center; }
            .game-btn { width: 100%; max-width: 250px; }
        }
        @media (max-width: 480px) {
            .header { padding: 0.8rem 4%; }
            .hero h1 { font-size: 1.8rem; }
            .section-title { font-size: 1.4rem; }
            .game-card { padding: 1.5rem; }
            .game-icon { font-size: 2.5rem; }
            .puzzle-item { min-width: 35px; height: 35px; font-size: 1rem; padding: 0 10px; }
            .grid-cell { width: 45px; height: 45px; }
            .answer-input { width: 120px; font-size: 1rem; }
            .play-circle { width: 60px; height: 60px; }
            .play-triangle { border-left-width: 18px; border-top-width: 11px; border-bottom-width: 11px; }
        }
    </style>
</head>
<body>
    <!-- ============================================================
         ANIMATED BACKGROUND PARTICLES
         ============================================================ -->
    <div class="bg-animated">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- ============================================================
         FIXED HEADER / NAVIGATION
         ============================================================ -->
    <header class="header">
        <div class="logo" onclick="showScreen('home')">ðŸ§© Logic Puzzle Master</div>
        <nav>
            <ul class="nav-links">
                <li><a href="#" onclick="showScreen('home')">Home</a></li>
                <li><a href="#games-section">Games</a></li>
                <li><a href="#benefits">Benefits</a></li>
            </ul>
        </nav>
        <button class="pwa-install-btn" id="pwaInstallBtn" onclick="installPWA()">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
            Install App
        </button>
    </header>

    <!-- ============================================================
         HOME SCREEN
         ============================================================ -->
    <div id="home-screen" class="screen active">
        <!-- Hero Section -->
        <section class="hero">
            <h1>Train Your Brain with Logic Puzzles</h1>
            <p>Challenge yourself with 10+ unique puzzle games designed to boost cognitive skills, pattern recognition, and logical reasoning. Interactive tutorials included!</p>
            <button class="hero-btn" onclick="document.getElementById('games-section').scrollIntoView({behavior: 'smooth'})">
                Start Playing Now
            </button>
        </section>

        <!-- PWA Install Banner - Visible on Home Page -->
        <div class="pwa-install-banner" id="pwaInstallBanner">
            <h3>
                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                Install Logic Puzzle Master
            </h3>
            <p>Add this app to your device for the best experience - play offline anytime!</p>
            <div class="install-features">
                <span class="feature-tag">Works Offline</span>
                <span class="feature-tag">No Downloads</span>
                <span class="feature-tag">Fast & Light</span>
                <span class="feature-tag">Free Forever</span>
            </div>
            <button class="pwa-hero-install-btn" onclick="installPWA()">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
                Install App Now
            </button>
            <br>
            <button class="pwa-dismiss-btn" onclick="dismissInstallBanner()">Maybe later</button>
        </div>

        <!-- Main Games Section -->
        <section id="games-section" class="games-section">
            <h2 class="section-title">ðŸŽ® Featured Games</h2>
            <div class="games-grid">
                <!-- Game 1: Number Pattern -->
                <div class="game-card" onclick="showScreen('game1')">
                    <span class="game-badge badge-popular">Popular</span>
                    <span class="game-icon">ðŸ”¢</span>
                    <h3>Number Pattern Puzzle</h3>
                    <p>Find the missing number in mathematical sequences using pattern recognition.</p>
                </div>

                <!-- Game 2: Symbol Decoder -->
                <div class="game-card" onclick="showScreen('game2')">
                    <span class="game-badge badge-new">New</span>
                    <span class="game-icon">ðŸ”</span>
                    <h3>Symbol Decoder</h3>
                    <p>Crack the code by figuring out what number each symbol represents.</p>
                </div>

                <!-- Game 3: Equation Logic -->
                <div class="game-card" onclick="showScreen('game3')">
                    <span class="game-icon">âž•</span>
                    <h3>Equation Logic Solver</h3>
                    <p>Complete equations by finding the missing numbers or operators.</p>
                </div>

                <!-- Game 4: Odd One Out -->
                <div class="game-card" onclick="showScreen('game4')">
                    <span class="game-icon">ðŸŽ¯</span>
                    <h3>Odd-One-Out</h3>
                    <p>Identify the item that doesn't belong based on logical categorization.</p>
                </div>

                <!-- Game 5: Pattern Grid -->
                <div class="game-card" onclick="showScreen('game5')">
                    <span class="game-icon">ðŸ“Š</span>
                    <h3>Pattern Grid Deduction</h3>
                    <p>Use logical clues to correctly mark cells in a grid puzzle.</p>
                </div>
            </div>
        </section>

        <!-- More Games Expandable Section -->
        <section class="more-games-section">
            <button class="expand-btn" id="expandBtn" onclick="toggleMoreGames()">
                <span>ðŸŽ² Discover More Games</span>
                <span class="expand-icon">â–¼</span>
            </button>
            <div class="expandable-content" id="moreGamesContent">
                <div class="more-games-grid">
                    <!-- Game 6: Path Finder Logic Maze -->
                    <div class="game-card" onclick="showScreen('game6')">
                        <span class="game-badge badge-new">New</span>
                        <span class="game-icon">ðŸ—ºï¸</span>
                        <h3>Path Finder Logic Maze</h3>
                        <p>Navigate mazes using arrow clues and logical constraints</p>
                    </div>

                    <!-- Game 7: Word Deduction Mini-Game -->
                    <div class="game-card" onclick="showScreen('game7')">
                        <span class="game-badge badge-popular">Hot</span>
                        <span class="game-icon">ðŸ“</span>
                        <h3>Word Deduction</h3>
                        <p>Guess the hidden word using letter feedback clues</p>
                    </div>

                    <!-- Game 8: Memory Sequence Challenge -->
                    <div class="game-card" onclick="showScreen('game8')">
                        <span class="game-icon">ðŸ§ </span>
                        <h3>Memory Sequence</h3>
                        <p>Remember and repeat growing sequences of colors</p>
                    </div>

                    <!-- Game 9: Color Pattern Rotation Puzzle -->
                    <div class="game-card" onclick="showScreen('game9')">
                        <span class="game-icon">ðŸŽ¨</span>
                        <h3>Color Pattern Rotation</h3>
                        <p>Rotate tiles to match the target color pattern</p>
                    </div>

                    <!-- Game 10: Logic Grid Detective Puzzle -->
                    <div class="game-card" onclick="showScreen('game10')">
                        <span class="game-badge badge-new">New</span>
                        <span class="game-icon">ðŸ”</span>
                        <h3>Logic Grid Detective</h3>
                        <p>Solve mysteries using clues and elimination logic</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section id="benefits" class="benefits-section">
            <h2 class="section-title">ðŸ’ª Why Play Logic Puzzles?</h2>
            <div class="benefits-grid">
                <div class="benefit-item">
                    <div class="benefit-icon">ðŸ§ </div>
                    <h4>Boost Brain Power</h4>
                    <p>Strengthen neural connections and improve cognitive function</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">ðŸŽ¯</div>
                    <h4>Improve Focus</h4>
                    <p>Train your concentration and attention to detail</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">ðŸ’¡</div>
                    <h4>Problem Solving</h4>
                    <p>Develop analytical thinking and creative solutions</p>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">ðŸ“ˆ</div>
                    <h4>Pattern Recognition</h4>
                    <p>Enhance ability to identify trends and relationships</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Â© 2024 Logic Puzzle Master. Train your brain daily!</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Use</a>
                <a href="#">Contact</a>
            </div>
        </footer>
    </div>

    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
        <span id="offlineIcon">ðŸ“¡</span>
        <span id="offlineText">You're offline</span>
    </div>

    <!-- Update Notification -->
    <div class="update-notification" id="updateNotification">
        <p>A new version is available!</p>
        <button class="update-btn" onclick="updateApp()">Update Now</button>
        <button class="update-dismiss" onclick="dismissUpdate()">Later</button>
    </div>

    <!-- ============================================================
         GAME 1: NUMBER PATTERN PUZZLE
         ============================================================ -->
    <div id="game1-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ”¢ Number Pattern Puzzle</h1>
                <p class="game-subtitle">Find the missing number in the sequence</p>
            </div>

            <!-- Instructions Panel -->
            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Observe the sequence of numbers shown</li>
                    <li>Identify the pattern (adding, multiplying, etc.)</li>
                    <li>Calculate the missing number marked with "?"</li>
                    <li>Enter your answer and click "Check Answer"</li>
                </ol>
            </div>

            <!-- Objectives Panel -->
            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Develop pattern recognition and mathematical reasoning skills.</p>
                <p><strong>Benefits:</strong> Improves numerical fluency, enhances analytical thinking, and strengthens problem-solving abilities used in math, coding, and everyday decisions.</p>
            </div>

            <!-- Hints Panel -->
            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Calculate the difference between consecutive numbers</li>
                    <li>Check if numbers are multiplied by a constant factor</li>
                    <li>Look for patterns like squares, cubes, or Fibonacci</li>
                </ul>
            </div>

            <!-- Puzzle Container -->
            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Complete the Sequence:</h3>
                <div class="puzzle-display" id="game1-display"></div>
                <input type="number" class="answer-input" id="game1-answer" placeholder="?">
                <div class="btn-group">
                    <button class="game-btn check-btn" onclick="checkGame1()">Check Answer</button>
                    <button class="game-btn restart-btn" onclick="generateGame1()">New Puzzle</button>
                </div>
                <div class="feedback" id="game1-feedback"></div>
            </div>

            <!-- Video Tutorial Section -->
            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">How to Solve Number Patterns</span>
                    </div>
                    <div class="video-canvas" id="tutorial1-canvas">
                        <div class="play-overlay" id="tutorial1-overlay" onclick="startTutorial(1)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial1-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial1-playpause" onclick="toggleTutorial(1)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 1)">
                            <div class="progress-fill" id="tutorial1-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial1-time">0:00 / 0:15</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 2: SYMBOL DECODER PUZZLE
         ============================================================ -->
    <div id="game2-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ” Symbol Decoder</h1>
                <p class="game-subtitle">Crack the code! What number does each symbol represent?</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Study the equations using symbols (ðŸ”´, ðŸ”µ, ðŸŸ¢)</li>
                    <li>Use algebraic reasoning to deduce each symbol's value</li>
                    <li>Enter the correct number for each symbol</li>
                    <li>Click "Check Answer" to verify your solution</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Decode symbol values using logical deduction.</p>
                <p><strong>Benefits:</strong> Builds algebraic thinking, strengthens substitution skills, and develops systematic problem-solving approaches essential for mathematics.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Start with equations that have only one unknown</li>
                    <li>Substitute known values into other equations</li>
                    <li>Work step-by-step, solving one symbol at a time</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Decode the Symbols:</h3>
                <div id="game2-equations"></div>
                <div style="margin-top: 1.5rem;">
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1.5rem;">
                        <div style="text-align: center;">
                            <span style="font-size: 2rem;">ðŸ”´</span>
                            <input type="number" class="symbol-input" id="symbol-red" placeholder="?">
                        </div>
                        <div style="text-align: center;">
                            <span style="font-size: 2rem;">ðŸ”µ</span>
                            <input type="number" class="symbol-input" id="symbol-blue" placeholder="?">
                        </div>
                        <div style="text-align: center;">
                            <span style="font-size: 2rem;">ðŸŸ¢</span>
                            <input type="number" class="symbol-input" id="symbol-green" placeholder="?">
                        </div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="game-btn check-btn" onclick="checkGame2()">Check Answer</button>
                    <button class="game-btn restart-btn" onclick="generateGame2()">New Puzzle</button>
                </div>
                <div class="feedback" id="game2-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Symbol Decoder Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial2-canvas">
                        <div class="play-overlay" id="tutorial2-overlay" onclick="startTutorial(2)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial2-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial2-playpause" onclick="toggleTutorial(2)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 2)">
                            <div class="progress-fill" id="tutorial2-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial2-time">0:00 / 0:18</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 3: EQUATION LOGIC SOLVER
         ============================================================ -->
    <div id="game3-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">âž• Equation Logic Solver</h1>
                <p class="game-subtitle">Find the missing number or operator</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Look at the incomplete equation</li>
                    <li>Figure out what's missing (number or operator)</li>
                    <li>Enter the missing piece to complete the equation</li>
                    <li>The equation must be mathematically correct</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Complete equations using logical and arithmetic reasoning.</p>
                <p><strong>Benefits:</strong> Reinforces arithmetic operations, develops reverse calculation skills, and improves mental math abilities.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>For missing numbers: use inverse operations</li>
                    <li>For missing operators: test each operation (+, -, Ã—, Ã·)</li>
                    <li>Double-check by substituting your answer back</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Complete the Equation:</h3>
                <div class="puzzle-display" id="game3-display"></div>
                <input type="text" class="answer-input" id="game3-answer" placeholder="?" style="width: 100px;">
                <div class="btn-group">
                    <button class="game-btn check-btn" onclick="checkGame3()">Check Answer</button>
                    <button class="game-btn restart-btn" onclick="generateGame3()">New Puzzle</button>
                </div>
                <div class="feedback" id="game3-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Equation Logic Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial3-canvas">
                        <div class="play-overlay" id="tutorial3-overlay" onclick="startTutorial(3)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial3-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial3-playpause" onclick="toggleTutorial(3)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 3)">
                            <div class="progress-fill" id="tutorial3-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial3-time">0:00 / 0:15</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 4: ODD ONE OUT
         ============================================================ -->
    <div id="game4-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸŽ¯ Odd-One-Out</h1>
                <p class="game-subtitle">Find the item that doesn't belong</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Look at the four items presented</li>
                    <li>Identify the common category or property</li>
                    <li>Find the one item that doesn't fit</li>
                    <li>Click on the odd one out</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Identify items that don't belong in a group.</p>
                <p><strong>Benefits:</strong> Enhances categorization skills, improves critical thinking, and develops the ability to identify relationships and exceptions.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Think about what category 3 items share</li>
                    <li>Consider properties: type, color, function, origin</li>
                    <li>The odd one might look similar but be different fundamentally</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Which one doesn't belong?</h3>
                <p id="game4-category" style="color: rgba(255,255,255,0.7); margin-bottom: 1rem;"></p>
                <div class="options-grid" id="game4-options"></div>
                <div class="btn-group">
                    <button class="game-btn restart-btn" onclick="generateGame4()">New Puzzle</button>
                </div>
                <div class="feedback" id="game4-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Odd-One-Out Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial4-canvas">
                        <div class="play-overlay" id="tutorial4-overlay" onclick="startTutorial(4)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial4-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial4-playpause" onclick="toggleTutorial(4)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 4)">
                            <div class="progress-fill" id="tutorial4-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial4-time">0:00 / 0:12</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 5: PATTERN GRID DEDUCTION
         ============================================================ -->
    <div id="game5-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ“Š Pattern Grid Deduction</h1>
                <p class="game-subtitle">Use clues to mark the correct cells</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Read the clues about rows and columns</li>
                    <li>Click cells to mark them (âœ“ for yes, âœ— for no)</li>
                    <li>Each click cycles through: empty â†’ âœ“ â†’ âœ—</li>
                    <li>Match all clues to solve the puzzle</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Correctly mark grid cells based on logical clues.</p>
                <p><strong>Benefits:</strong> Develops spatial reasoning, strengthens deductive logic, and improves systematic constraint satisfaction skills.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Start with clues that give definite information</li>
                    <li>Use process of elimination for uncertain cells</li>
                    <li>Cross-reference row and column clues together</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Mark the Grid:</h3>
                <div class="clue-box" id="game5-clues"></div>
                <div class="grid-container">
                    <div class="puzzle-grid" id="game5-grid" style="grid-template-columns: repeat(3, 1fr);"></div>
                </div>
                <div class="btn-group">
                    <button class="game-btn check-btn" onclick="checkGame5()">Check Answer</button>
                    <button class="game-btn restart-btn" onclick="generateGame5()">New Puzzle</button>
                </div>
                <div class="feedback" id="game5-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Grid Deduction Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial5-canvas">
                        <div class="play-overlay" id="tutorial5-overlay" onclick="startTutorial(5)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial5-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial5-playpause" onclick="toggleTutorial(5)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 5)">
                            <div class="progress-fill" id="tutorial5-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial5-time">0:00 / 0:18</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 6: PATH FINDER LOGIC MAZE
         ============================================================ -->
    <div id="game6-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ—ºï¸ Path Finder Logic Maze</h1>
                <p class="game-subtitle">Navigate from Start to End following arrow directions</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Start at the green cell (S) and reach the gold cell (E)</li>
                    <li>Click on adjacent cells to move through the maze</li>
                    <li>Follow the arrow hints - they show valid directions</li>
                    <li>Avoid walls (dark cells) - you cannot pass through them</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Find the correct path from start to end.</p>
                <p><strong>Benefits:</strong> Develops spatial reasoning, path planning skills, and logical navigation abilities.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Plan your route before moving</li>
                    <li>Arrows show which directions are possible from each cell</li>
                    <li>If stuck, restart and try a different path</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Find the Path:</h3>
                <div class="maze-grid" id="game6-maze" style="grid-template-columns: repeat(5, 1fr);"></div>
                <div class="btn-group">
                    <button class="game-btn restart-btn" onclick="generateGame6()">New Maze</button>
                </div>
                <div class="feedback" id="game6-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Path Finder Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial6-canvas">
                        <div class="play-overlay" id="tutorial6-overlay" onclick="startTutorial(6)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial6-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial6-playpause" onclick="toggleTutorial(6)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 6)">
                            <div class="progress-fill" id="tutorial6-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial6-time">0:00 / 0:15</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 7: WORD DEDUCTION MINI-GAME
         ============================================================ -->
    <div id="game7-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ“ Word Deduction</h1>
                <p class="game-subtitle">Guess the 5-letter word in 6 tries</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Type a 5-letter word and press Enter</li>
                    <li>Green = correct letter in correct position</li>
                    <li>Yellow = correct letter in wrong position</li>
                    <li>Gray = letter not in the word</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Guess the hidden word using letter clues.</p>
                <p><strong>Benefits:</strong> Improves vocabulary, deductive reasoning, and strategic thinking skills.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Start with words containing common vowels (A, E, I, O, U)</li>
                    <li>Use feedback to eliminate impossible letters</li>
                    <li>Pay attention to letter positions in yellow hints</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Guess the Word:</h3>
                <div class="word-grid" id="game7-grid"></div>
                <div class="keyboard" id="game7-keyboard"></div>
                <div class="btn-group">
                    <button class="game-btn restart-btn" onclick="generateGame7()">New Word</button>
                </div>
                <div class="feedback" id="game7-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Word Deduction Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial7-canvas">
                        <div class="play-overlay" id="tutorial7-overlay" onclick="startTutorial(7)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial7-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial7-playpause" onclick="toggleTutorial(7)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 7)">
                            <div class="progress-fill" id="tutorial7-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial7-time">0:00 / 0:18</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 8: MEMORY SEQUENCE CHALLENGE
         ============================================================ -->
    <div id="game8-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ§  Memory Sequence</h1>
                <p class="game-subtitle">Remember and repeat the color sequence</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Watch the sequence of colors light up</li>
                    <li>Click the colors in the same order</li>
                    <li>Each round adds one more color to remember</li>
                    <li>One mistake and it's game over!</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Remember and repeat increasingly longer sequences.</p>
                <p><strong>Benefits:</strong> Strengthens short-term memory, concentration, and sequential processing abilities.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Focus on the pattern, not individual colors</li>
                    <li>Try saying the colors aloud as they appear</li>
                    <li>Take your time - there's no rush to click</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <div class="memory-status" id="game8-status">Press Start to begin!</div>
                <div class="memory-level">Level: <span id="game8-level">1</span></div>
                <div class="memory-board" id="game8-board">
                    <button class="memory-btn red" data-color="red" onclick="memoryClick('red')"></button>
                    <button class="memory-btn blue" data-color="blue" onclick="memoryClick('blue')"></button>
                    <button class="memory-btn green" data-color="green" onclick="memoryClick('green')"></button>
                    <button class="memory-btn yellow" data-color="yellow" onclick="memoryClick('yellow')"></button>
                </div>
                <div class="btn-group">
                    <button class="game-btn check-btn" id="game8-start" onclick="startMemoryGame()">Start Game</button>
                    <button class="game-btn restart-btn" onclick="generateGame8()">Reset</button>
                </div>
                <div class="feedback" id="game8-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Memory Sequence Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial8-canvas">
                        <div class="play-overlay" id="tutorial8-overlay" onclick="startTutorial(8)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial8-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial8-playpause" onclick="toggleTutorial(8)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 8)">
                            <div class="progress-fill" id="tutorial8-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial8-time">0:00 / 0:15</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 9: COLOR PATTERN ROTATION PUZZLE
         ============================================================ -->
    <div id="game9-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸŽ¨ Color Pattern Rotation</h1>
                <p class="game-subtitle">Rotate tiles to match the target pattern</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Look at the target pattern on the right</li>
                    <li>Click tiles in your grid to rotate their colors</li>
                    <li>Each click cycles through 4 colors</li>
                    <li>Match your grid exactly to the target to win</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Transform your grid to match the target pattern.</p>
                <p><strong>Benefits:</strong> Enhances visual pattern recognition, color differentiation, and systematic problem-solving.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Work on one tile at a time</li>
                    <li>Remember the color cycle: Red â†’ Blue â†’ Green â†’ Purple</li>
                    <li>Count clicks needed for each tile</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Match the Pattern:</h3>
                <div class="pattern-container">
                    <div class="pattern-box">
                        <h4>Your Grid</h4>
                        <div class="rotation-grid" id="game9-player" style="grid-template-columns: repeat(3, 1fr);"></div>
                        <p class="rotation-hint">Click to rotate</p>
                    </div>
                    <div class="pattern-box target-grid">
                        <h4>Target</h4>
                        <div class="rotation-grid" id="game9-target" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                </div>
                <div class="btn-group">
                    <button class="game-btn check-btn" onclick="checkGame9()">Check Match</button>
                    <button class="game-btn restart-btn" onclick="generateGame9()">New Puzzle</button>
                </div>
                <div class="feedback" id="game9-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Color Rotation Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial9-canvas">
                        <div class="play-overlay" id="tutorial9-overlay" onclick="startTutorial(9)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial9-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial9-playpause" onclick="toggleTutorial(9)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 9)">
                            <div class="progress-fill" id="tutorial9-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial9-time">0:00 / 0:15</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         GAME 10: LOGIC GRID DETECTIVE PUZZLE
         ============================================================ -->
    <div id="game10-screen" class="screen">
        <div class="game-screen">
            <button class="back-btn" onclick="showScreen('home')">â† Back to Home</button>

            <div class="game-header">
                <h1 class="game-title">ðŸ” Logic Grid Detective</h1>
                <p class="game-subtitle">Use clues to solve the mystery</p>
            </div>

            <div class="info-panel">
                <h3>ðŸ“– How to Play</h3>
                <ol>
                    <li>Read the clues carefully</li>
                    <li>Click grid cells to mark: âœ“ (yes) or âœ— (no)</li>
                    <li>Each person has exactly one item</li>
                    <li>Use elimination to find all matches</li>
                </ol>
            </div>

            <div class="info-panel objectives-panel">
                <h3>ðŸŽ¯ Objectives & Benefits</h3>
                <p><strong>Goal:</strong> Determine which person owns which item using logic clues.</p>
                <p><strong>Benefits:</strong> Develops deductive reasoning, process of elimination skills, and logical inference abilities.</p>
            </div>

            <div class="info-panel hints-panel">
                <h3>ðŸ’¡ Hints</h3>
                <ul>
                    <li>Start with definite clues (X is NOT Y)</li>
                    <li>When you find a match, eliminate that option for others</li>
                    <li>Cross-reference multiple clues together</li>
                </ul>
            </div>

            <div class="puzzle-container">
                <h3 style="margin-bottom: 1rem; color: #ffd700;">Solve the Mystery:</h3>
                <ul class="clue-list" id="game10-clues"></ul>
                <div class="detective-grid" id="game10-grid" style="grid-template-columns: repeat(4, 1fr);"></div>
                <div class="btn-group">
                    <button class="game-btn check-btn" onclick="checkGame10()">Check Solution</button>
                    <button class="game-btn restart-btn" onclick="generateGame10()">New Puzzle</button>
                </div>
                <div class="feedback" id="game10-feedback"></div>
            </div>

            <div class="video-section">
                <h3>ðŸŽ¬ Video Tutorial</h3>
                <div class="video-player">
                    <div class="video-header">
                        <span class="video-dot red"></span>
                        <span class="video-dot yellow"></span>
                        <span class="video-dot green"></span>
                        <span class="video-title">Logic Grid Tutorial</span>
                    </div>
                    <div class="video-canvas" id="tutorial10-canvas">
                        <div class="play-overlay" id="tutorial10-overlay" onclick="startTutorial(10)">
                            <div class="play-circle">
                                <div class="play-triangle"></div>
                            </div>
                        </div>
                        <div class="tutorial-content" id="tutorial10-content"></div>
                    </div>
                    <div class="video-controls">
                        <button class="control-btn" id="tutorial10-playpause" onclick="toggleTutorial(10)">â–¶</button>
                        <div class="progress-bar" onclick="seekTutorial(event, 10)">
                            <div class="progress-fill" id="tutorial10-progress"></div>
                        </div>
                        <span class="time-display" id="tutorial10-time">0:00 / 0:18</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================
         JAVASCRIPT - Game Logic & Interactivity
         ============================================================ -->
    <script>
        /* ===========================================================
           SCREEN MANAGEMENT
           =========================================================== */
        function showScreen(screenId) {
            // Hide all screens
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            // Show selected screen
            document.getElementById(screenId + '-screen').classList.add('active');
            // Scroll to top
            window.scrollTo(0, 0);
            // Generate puzzle if navigating to a game
            if (screenId === 'game1') generateGame1();
            if (screenId === 'game2') generateGame2();
            if (screenId === 'game3') generateGame3();
            if (screenId === 'game4') generateGame4();
            if (screenId === 'game5') generateGame5();
            if (screenId === 'game6') generateGame6();
            if (screenId === 'game7') generateGame7();
            if (screenId === 'game8') generateGame8();
            if (screenId === 'game9') generateGame9();
            if (screenId === 'game10') generateGame10();
        }

        /* ===========================================================
           MORE GAMES EXPANDABLE SECTION
           =========================================================== */
        function toggleMoreGames() {
            const btn = document.getElementById('expandBtn');
            const content = document.getElementById('moreGamesContent');
            btn.classList.toggle('expanded');
            content.classList.toggle('show');
        }

        /* ===========================================================
           MODAL FUNCTIONS
           =========================================================== */
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }
        // Close modal on outside click
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        /* ===========================================================
           GAME 1: NUMBER PATTERN PUZZLE
           =========================================================== */
        let game1Data = {};

        function generateGame1() {
            // Clear previous state
            document.getElementById('game1-feedback').classList.remove('show');
            document.getElementById('game1-answer').value = '';

            // Generate pattern type randomly
            const patternTypes = ['add', 'multiply', 'squares', 'fibonacci'];
            const type = patternTypes[Math.floor(Math.random() * patternTypes.length)];

            let sequence = [];
            let answer;
            const missingIndex = Math.floor(Math.random() * 4) + 1; // Position 1-4

            if (type === 'add') {
                const start = Math.floor(Math.random() * 10) + 1;
                const diff = Math.floor(Math.random() * 8) + 2;
                for (let i = 0; i < 6; i++) {
                    sequence.push(start + (diff * i));
                }
            } else if (type === 'multiply') {
                const start = Math.floor(Math.random() * 3) + 2;
                const mult = Math.floor(Math.random() * 2) + 2;
                let val = start;
                for (let i = 0; i < 6; i++) {
                    sequence.push(val);
                    val *= mult;
                }
            } else if (type === 'squares') {
                const offset = Math.floor(Math.random() * 3);
                for (let i = 1; i <= 6; i++) {
                    sequence.push((i + offset) * (i + offset));
                }
            } else { // fibonacci-like
                const a = Math.floor(Math.random() * 5) + 1;
                const b = Math.floor(Math.random() * 5) + 1;
                sequence = [a, b];
                for (let i = 2; i < 6; i++) {
                    sequence.push(sequence[i-1] + sequence[i-2]);
                }
            }

            answer = sequence[missingIndex];
            game1Data = { sequence: [...sequence], answer, missingIndex };

            // Render display
            const display = document.getElementById('game1-display');
            display.innerHTML = sequence.map((num, idx) => {
                if (idx === missingIndex) {
                    return `<div class="puzzle-item mystery">?</div>`;
                }
                return `<div class="puzzle-item">${num}</div>`;
            }).join('');
        }

        function checkGame1() {
            const userAnswer = parseInt(document.getElementById('game1-answer').value);
            const feedback = document.getElementById('game1-feedback');

            if (userAnswer === game1Data.answer) {
                feedback.className = 'feedback show win';
                feedback.textContent = `ðŸŽ‰ Correct! The answer is ${game1Data.answer}!`;
            } else {
                feedback.className = 'feedback show lose';
                feedback.textContent = `âŒ Not quite. The correct answer was ${game1Data.answer}. Try again!`;
            }
        }

        /* ===========================================================
           GAME 2: SYMBOL DECODER
           =========================================================== */
        let game2Data = {};

        function generateGame2() {
            document.getElementById('game2-feedback').classList.remove('show');
            document.getElementById('symbol-red').value = '';
            document.getElementById('symbol-blue').value = '';
            document.getElementById('symbol-green').value = '';

            // Generate random values for symbols
            const red = Math.floor(Math.random() * 9) + 1;
            const blue = Math.floor(Math.random() * 9) + 1;
            const green = Math.floor(Math.random() * 9) + 1;
            game2Data = { red, blue, green };

            // Generate equations
            const eq1 = `ðŸ”´ + ðŸ”´ = ${red * 2}`;
            const eq2 = `ðŸ”´ + ðŸ”µ = ${red + blue}`;
            const eq3 = `ðŸ”µ + ðŸŸ¢ = ${blue + green}`;
            const eq4 = `ðŸ”´ + ðŸŸ¢ = ${red + green}`;

            const equations = document.getElementById('game2-equations');
            equations.innerHTML = `
                <div class="symbol-equation"><span class="symbol-item">ðŸ”´</span> + <span class="symbol-item">ðŸ”´</span> = <span style="font-size:1.3rem;font-weight:600;">${red * 2}</span></div>
                <div class="symbol-equation"><span class="symbol-item">ðŸ”´</span> + <span class="symbol-item">ðŸ”µ</span> = <span style="font-size:1.3rem;font-weight:600;">${red + blue}</span></div>
                <div class="symbol-equation"><span class="symbol-item">ðŸ”µ</span> + <span class="symbol-item">ðŸŸ¢</span> = <span style="font-size:1.3rem;font-weight:600;">${blue + green}</span></div>
                <div class="symbol-equation"><span class="symbol-item">ðŸ”´</span> + <span class="symbol-item">ðŸŸ¢</span> = <span style="font-size:1.3rem;font-weight:600;">${red + green}</span></div>
            `;
        }

        function checkGame2() {
            const userRed = parseInt(document.getElementById('symbol-red').value);
            const userBlue = parseInt(document.getElementById('symbol-blue').value);
            const userGreen = parseInt(document.getElementById('symbol-green').value);
            const feedback = document.getElementById('game2-feedback');

            if (userRed === game2Data.red && userBlue === game2Data.blue && userGreen === game2Data.green) {
                feedback.className = 'feedback show win';
                feedback.textContent = `ðŸŽ‰ Excellent! ðŸ”´=${game2Data.red}, ðŸ”µ=${game2Data.blue}, ðŸŸ¢=${game2Data.green}`;
            } else {
                feedback.className = 'feedback show lose';
                feedback.textContent = `âŒ Not correct. The values were: ðŸ”´=${game2Data.red}, ðŸ”µ=${game2Data.blue}, ðŸŸ¢=${game2Data.green}`;
            }
        }

        /* ===========================================================
           GAME 3: EQUATION LOGIC SOLVER
           =========================================================== */
        let game3Data = {};

        function generateGame3() {
            document.getElementById('game3-feedback').classList.remove('show');
            document.getElementById('game3-answer').value = '';

            const operators = ['+', '-', 'Ã—', 'Ã·'];
            const missingType = Math.random() < 0.5 ? 'number' : 'operator';

            let a, b, op, result, answer;

            if (missingType === 'operator') {
                // Find number to make equation work with random operator
                op = operators[Math.floor(Math.random() * operators.length)];
                a = Math.floor(Math.random() * 12) + 2;
                b = Math.floor(Math.random() * 10) + 2;

                if (op === '+') result = a + b;
                else if (op === '-') result = a - b;
                else if (op === 'Ã—') result = a * b;
                else { // division - ensure clean result
                    b = Math.floor(Math.random() * 8) + 2;
                    a = b * (Math.floor(Math.random() * 8) + 2);
                    result = a / b;
                }
                answer = op;
                game3Data = { a, b, op, result, answer, missingType };

                document.getElementById('game3-display').innerHTML = `
                    <div class="puzzle-item">${a}</div>
                    <div class="puzzle-item mystery">?</div>
                    <div class="puzzle-item">${b}</div>
                    <div class="puzzle-item">=</div>
                    <div class="puzzle-item">${result}</div>
                `;
            } else {
                // Missing number
                op = operators[Math.floor(Math.random() * operators.length)];

                if (op === '+') {
                    a = Math.floor(Math.random() * 15) + 5;
                    b = Math.floor(Math.random() * 15) + 5;
                    result = a + b;
                } else if (op === '-') {
                    a = Math.floor(Math.random() * 20) + 10;
                    b = Math.floor(Math.random() * (a - 1)) + 1;
                    result = a - b;
                } else if (op === 'Ã—') {
                    a = Math.floor(Math.random() * 10) + 2;
                    b = Math.floor(Math.random() * 10) + 2;
                    result = a * b;
                } else {
                    b = Math.floor(Math.random() * 8) + 2;
                    result = Math.floor(Math.random() * 10) + 2;
                    a = b * result;
                }

                const missingPos = Math.floor(Math.random() * 3); // 0=a, 1=b, 2=result
                if (missingPos === 0) answer = a;
                else if (missingPos === 1) answer = b;
                else answer = result;

                game3Data = { a, b, op, result, answer, missingType, missingPos };

                const opSymbol = op;
                document.getElementById('game3-display').innerHTML = `
                    <div class="puzzle-item ${missingPos === 0 ? 'mystery' : ''}">${missingPos === 0 ? '?' : a}</div>
                    <div class="puzzle-item">${opSymbol}</div>
                    <div class="puzzle-item ${missingPos === 1 ? 'mystery' : ''}">${missingPos === 1 ? '?' : b}</div>
                    <div class="puzzle-item">=</div>
                    <div class="puzzle-item ${missingPos === 2 ? 'mystery' : ''}">${missingPos === 2 ? '?' : result}</div>
                `;
            }
        }

        function checkGame3() {
            const userAnswer = document.getElementById('game3-answer').value.trim();
            const feedback = document.getElementById('game3-feedback');

            let correct = false;
            if (game3Data.missingType === 'operator') {
                // Accept multiple formats for multiplication/division
                const normalizedAnswer = userAnswer.replace('*', 'Ã—').replace('x', 'Ã—').replace('/', 'Ã·');
                correct = normalizedAnswer === game3Data.answer;
            } else {
                correct = parseInt(userAnswer) === game3Data.answer;
            }

            if (correct) {
                feedback.className = 'feedback show win';
                feedback.textContent = `ðŸŽ‰ Correct! The answer is ${game3Data.answer}!`;
            } else {
                feedback.className = 'feedback show lose';
                feedback.textContent = `âŒ Not quite. The correct answer was ${game3Data.answer}. Try again!`;
            }
        }

        /* ===========================================================
           GAME 4: ODD ONE OUT
           =========================================================== */
        let game4Data = {};

        const oddOneOutSets = [
            { category: 'Fruits', items: ['Apple', 'Banana', 'Orange', 'Carrot'], odd: 'Carrot', reason: 'vegetable' },
            { category: 'Animals', items: ['Dog', 'Cat', 'Bird', 'Table'], odd: 'Table', reason: 'not alive' },
            { category: 'Numbers', items: ['2', '4', '7', '8'], odd: '7', reason: 'odd number' },
            { category: 'Planets', items: ['Mars', 'Venus', 'Moon', 'Jupiter'], odd: 'Moon', reason: 'not a planet' },
            { category: 'Colors', items: ['Red', 'Blue', 'Happy', 'Green'], odd: 'Happy', reason: 'emotion, not color' },
            { category: 'Vehicles', items: ['Car', 'Bicycle', 'Airplane', 'House'], odd: 'House', reason: 'not a vehicle' },
            { category: 'Even Numbers', items: ['12', '8', '15', '20'], odd: '15', reason: 'odd number' },
            { category: 'Water Animals', items: ['Fish', 'Whale', 'Lion', 'Dolphin'], odd: 'Lion', reason: 'land animal' },
            { category: 'Round Things', items: ['Ball', 'Orange', 'Cube', 'Moon'], odd: 'Cube', reason: 'not round' },
            { category: 'Instruments', items: ['Guitar', 'Piano', 'Drum', 'Pencil'], odd: 'Pencil', reason: 'not an instrument' }
        ];

        function generateGame4() {
            document.getElementById('game4-feedback').classList.remove('show');

            const set = oddOneOutSets[Math.floor(Math.random() * oddOneOutSets.length)];
            const shuffled = [...set.items].sort(() => Math.random() - 0.5);

            game4Data = { ...set, shuffled };

            document.getElementById('game4-category').textContent = `Hint: Think about "${set.category}"`;

            const options = document.getElementById('game4-options');
            options.innerHTML = shuffled.map(item => `
                <button class="option-btn" onclick="selectOddOne(this, '${item}')">${item}</button>
            `).join('');
        }

        function selectOddOne(btn, item) {
            // Remove previous selections
            document.querySelectorAll('#game4-options .option-btn').forEach(b => {
                b.classList.remove('selected', 'correct', 'wrong');
            });

            const feedback = document.getElementById('game4-feedback');

            if (item === game4Data.odd) {
                btn.classList.add('correct');
                feedback.className = 'feedback show win';
                feedback.textContent = `ðŸŽ‰ Correct! ${item} is the odd one out because it's a ${game4Data.reason}!`;
            } else {
                btn.classList.add('wrong');
                feedback.className = 'feedback show lose';
                feedback.textContent = `âŒ Not quite. ${game4Data.odd} was the odd one out (${game4Data.reason}).`;
            }
        }

        /* ===========================================================
           GAME 5: PATTERN GRID DEDUCTION
           =========================================================== */
        let game5Data = {};

        function generateGame5() {
            document.getElementById('game5-feedback').classList.remove('show');

            // Generate a 3x3 solution grid
            const solution = [];
            for (let i = 0; i < 9; i++) {
                solution.push(Math.random() < 0.4 ? 1 : 0); // 1 = marked, 0 = empty
            }

            // Generate clues based on solution
            const rowCounts = [0, 0, 0];
            const colCounts = [0, 0, 0];

            for (let i = 0; i < 9; i++) {
                if (solution[i] === 1) {
                    rowCounts[Math.floor(i / 3)]++;
                    colCounts[i % 3]++;
                }
            }

            const clues = [
                `Row 1 has exactly ${rowCounts[0]} marked cell(s)`,
                `Row 2 has exactly ${rowCounts[1]} marked cell(s)`,
                `Row 3 has exactly ${rowCounts[2]} marked cell(s)`,
                `Column 1 has exactly ${colCounts[0]} marked cell(s)`,
                `Column 2 has exactly ${colCounts[1]} marked cell(s)`,
                `Column 3 has exactly ${colCounts[2]} marked cell(s)`
            ];

            game5Data = { solution, rowCounts, colCounts };

            // Render clues
            document.getElementById('game5-clues').innerHTML = clues.map(c =>
                `<div class="clue-item">â€¢ ${c}</div>`
            ).join('');

            // Render grid
            const grid = document.getElementById('game5-grid');
            grid.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'grid-cell';
                cell.dataset.index = i;
                cell.dataset.state = '0'; // 0=empty, 1=marked, 2=crossed
                cell.onclick = () => toggleCell(cell);
                grid.appendChild(cell);
            }
        }

        function toggleCell(cell) {
            const state = parseInt(cell.dataset.state);
            const newState = (state + 1) % 3;
            cell.dataset.state = newState;

            cell.classList.remove('marked', 'crossed');
            if (newState === 1) {
                cell.classList.add('marked');
                cell.textContent = 'âœ“';
            } else if (newState === 2) {
                cell.classList.add('crossed');
                cell.textContent = 'âœ—';
            } else {
                cell.textContent = '';
            }
        }

        function checkGame5() {
            const cells = document.querySelectorAll('#game5-grid .grid-cell');
            const feedback = document.getElementById('game5-feedback');

            let correct = true;
            cells.forEach((cell, idx) => {
                const state = parseInt(cell.dataset.state);
                const expected = game5Data.solution[idx];
                if ((expected === 1 && state !== 1) || (expected === 0 && state === 1)) {
                    correct = false;
                }
            });

            if (correct) {
                feedback.className = 'feedback show win';
                feedback.textContent = 'ðŸŽ‰ Perfect! You solved the grid puzzle!';
            } else {
                feedback.className = 'feedback show lose';
                feedback.textContent = 'âŒ Not quite right. Check the clues and try again!';
            }
        }

        /* ===========================================================
           GAME 6: PATH FINDER LOGIC MAZE
           =========================================================== */
        let game6Data = {};

        function generateGame6() {
            document.getElementById('game6-feedback').classList.remove('show');

            // Create a 5x5 maze
            const size = 5;
            const maze = [];
            const arrows = ['â†‘', 'â†’', 'â†“', 'â†', 'â†—', 'â†˜', 'â†™', 'â†–'];

            // Generate maze with start at top-left and end at bottom-right
            for (let i = 0; i < size * size; i++) {
                maze.push({
                    isWall: Math.random() < 0.2 && i !== 0 && i !== size * size - 1,
                    arrow: arrows[Math.floor(Math.random() * arrows.length)]
                });
            }

            // Ensure start and end are not walls
            maze[0].isWall = false;
            maze[size * size - 1].isWall = false;

            game6Data = { maze, size, currentPos: 0, path: [0] };
            renderMaze();
        }

        function renderMaze() {
            const grid = document.getElementById('game6-maze');
            grid.innerHTML = '';
            const { maze, size, currentPos } = game6Data;

            maze.forEach((cell, idx) => {
                const div = document.createElement('div');
                div.className = 'maze-cell';

                if (cell.isWall) {
                    div.classList.add('wall');
                    div.textContent = 'â–“';
                } else if (idx === 0) {
                    div.classList.add('start');
                    div.textContent = 'S';
                } else if (idx === size * size - 1) {
                    div.classList.add('end');
                    div.textContent = 'E';
                } else {
                    div.textContent = cell.arrow;
                }

                if (idx === currentPos) {
                    div.classList.add('current');
                }
                if (game6Data.path.includes(idx) && idx !== currentPos) {
                    div.classList.add('path');
                }

                div.onclick = () => moveTo(idx);
                grid.appendChild(div);
            });
        }

        function moveTo(idx) {
            const { maze, size, currentPos } = game6Data;
            if (maze[idx].isWall) return;

            // Check if adjacent
            const currentRow = Math.floor(currentPos / size);
            const currentCol = currentPos % size;
            const targetRow = Math.floor(idx / size);
            const targetCol = idx % size;

            const rowDiff = Math.abs(currentRow - targetRow);
            const colDiff = Math.abs(currentCol - targetCol);

            if (rowDiff <= 1 && colDiff <= 1 && (rowDiff + colDiff > 0)) {
                game6Data.currentPos = idx;
                game6Data.path.push(idx);
                renderMaze();

                // Check win
                if (idx === size * size - 1) {
                    const feedback = document.getElementById('game6-feedback');
                    feedback.className = 'feedback show win';
                    feedback.textContent = `ðŸŽ‰ You found the path in ${game6Data.path.length} moves!`;
                }
            }
        }

        /* ===========================================================
           GAME 7: WORD DEDUCTION MINI-GAME
           =========================================================== */
        let game7Data = {};
        const wordList = ['APPLE', 'BRAIN', 'CHASE', 'DREAM', 'EAGLE', 'FLAME', 'GRAPE', 'HEART', 'JUICE', 'KNEEL', 'LEMON', 'MANGO', 'NIGHT', 'OCEAN', 'PIANO', 'QUEEN', 'RIVER', 'STONE', 'TIGER', 'UNITY', 'VOICE', 'WATER', 'YOUTH', 'ZEBRA', 'BLEND', 'CRISP', 'DRIFT', 'FROST', 'GLOBE', 'HOUSE', 'LIGHT', 'MAPLE', 'NORTH', 'PEARL', 'QUIET', 'REACT', 'SHINE', 'THINK', 'ULTRA', 'VIVID', 'WHEAT', 'WRITE'];

        function generateGame7() {
            document.getElementById('game7-feedback').classList.remove('show');

            const targetWord = wordList[Math.floor(Math.random() * wordList.length)];
            game7Data = {
                target: targetWord,
                currentRow: 0,
                currentCol: 0,
                guesses: [],
                letterStates: {},
                gameOver: false
            };

            renderWordGrid();
            renderKeyboard();
        }

        function renderWordGrid() {
            const grid = document.getElementById('game7-grid');
            grid.innerHTML = '';

            for (let row = 0; row < 6; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'word-row';

                for (let col = 0; col < 5; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'letter-cell';
                    cell.id = `cell-${row}-${col}`;

                    if (game7Data.guesses[row]) {
                        cell.textContent = game7Data.guesses[row][col].letter;
                        cell.classList.add(game7Data.guesses[row][col].state);
                    } else if (row === game7Data.currentRow && col < game7Data.currentCol) {
                        // Show current input
                    }

                    if (row === game7Data.currentRow && col === game7Data.currentCol && !game7Data.gameOver) {
                        cell.classList.add('active');
                    }

                    rowDiv.appendChild(cell);
                }
                grid.appendChild(rowDiv);
            }
        }

        function renderKeyboard() {
            const keyboard = document.getElementById('game7-keyboard');
            const rows = ['QWERTYUIOP', 'ASDFGHJKL', 'ZXCVBNM'];

            keyboard.innerHTML = '';
            rows.forEach((row, rowIdx) => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';

                if (rowIdx === 2) {
                    const enterBtn = document.createElement('button');
                    enterBtn.className = 'key-btn wide';
                    enterBtn.textContent = 'Enter';
                    enterBtn.onclick = () => submitGuess();
                    rowDiv.appendChild(enterBtn);
                }

                row.split('').forEach(letter => {
                    const btn = document.createElement('button');
                    btn.className = 'key-btn';
                    btn.textContent = letter;
                    if (game7Data.letterStates[letter]) {
                        btn.classList.add(game7Data.letterStates[letter]);
                    }
                    btn.onclick = () => typeLetter(letter);
                    rowDiv.appendChild(btn);
                });

                if (rowIdx === 2) {
                    const delBtn = document.createElement('button');
                    delBtn.className = 'key-btn wide';
                    delBtn.textContent = 'âŒ«';
                    delBtn.onclick = () => deleteLetter();
                    rowDiv.appendChild(delBtn);
                }

                keyboard.appendChild(rowDiv);
            });
        }

        function typeLetter(letter) {
            if (game7Data.gameOver || game7Data.currentCol >= 5) return;

            const cell = document.getElementById(`cell-${game7Data.currentRow}-${game7Data.currentCol}`);
            cell.textContent = letter;
            game7Data.currentCol++;
            renderWordGrid();
        }

        function deleteLetter() {
            if (game7Data.currentCol <= 0) return;

            game7Data.currentCol--;
            const cell = document.getElementById(`cell-${game7Data.currentRow}-${game7Data.currentCol}`);
            cell.textContent = '';
            renderWordGrid();
        }

        function submitGuess() {
            if (game7Data.currentCol !== 5) return;

            const guess = [];
            for (let i = 0; i < 5; i++) {
                guess.push(document.getElementById(`cell-${game7Data.currentRow}-${i}`).textContent);
            }
            const guessWord = guess.join('');

            // Check each letter
            const result = [];
            const targetLetters = game7Data.target.split('');
            const usedIndices = [];

            // First pass: correct positions
            for (let i = 0; i < 5; i++) {
                if (guess[i] === targetLetters[i]) {
                    result[i] = { letter: guess[i], state: 'correct' };
                    usedIndices.push(i);
                    game7Data.letterStates[guess[i]] = 'correct';
                }
            }

            // Second pass: present but wrong position
            for (let i = 0; i < 5; i++) {
                if (!result[i]) {
                    const targetIdx = targetLetters.findIndex((l, idx) => l === guess[i] && !usedIndices.includes(idx));
                    if (targetIdx !== -1) {
                        result[i] = { letter: guess[i], state: 'present' };
                        usedIndices.push(targetIdx);
                        if (game7Data.letterStates[guess[i]] !== 'correct') {
                            game7Data.letterStates[guess[i]] = 'present';
                        }
                    } else {
                        result[i] = { letter: guess[i], state: 'absent' };
                        if (!game7Data.letterStates[guess[i]]) {
                            game7Data.letterStates[guess[i]] = 'absent';
                        }
                    }
                }
            }

            game7Data.guesses.push(result);
            game7Data.currentRow++;
            game7Data.currentCol = 0;

            const feedback = document.getElementById('game7-feedback');

            if (guessWord === game7Data.target) {
                game7Data.gameOver = true;
                feedback.className = 'feedback show win';
                feedback.textContent = `ðŸŽ‰ Excellent! You guessed "${game7Data.target}" in ${game7Data.currentRow} tries!`;
            } else if (game7Data.currentRow >= 6) {
                game7Data.gameOver = true;
                feedback.className = 'feedback show lose';
                feedback.textContent = `âŒ Game Over! The word was "${game7Data.target}"`;
            }

            renderWordGrid();
            renderKeyboard();
        }

        // Keyboard input for word game
        document.addEventListener('keydown', (e) => {
            if (!document.getElementById('game7-screen').classList.contains('active')) return;
            if (game7Data.gameOver) return;

            if (e.key === 'Enter') {
                submitGuess();
            } else if (e.key === 'Backspace') {
                deleteLetter();
            } else if (/^[a-zA-Z]$/.test(e.key)) {
                typeLetter(e.key.toUpperCase());
            }
        });

        /* ===========================================================
           GAME 8: MEMORY SEQUENCE CHALLENGE
           =========================================================== */
        let game8Data = { sequence: [], playerIndex: 0, level: 1, playing: false, canClick: false };
        const memoryColors = ['red', 'blue', 'green', 'yellow'];

        function generateGame8() {
            game8Data = { sequence: [], playerIndex: 0, level: 1, playing: false, canClick: false };
            document.getElementById('game8-feedback').classList.remove('show');
            document.getElementById('game8-status').textContent = 'Press Start to begin!';
            document.getElementById('game8-level').textContent = '1';
            document.getElementById('game8-start').disabled = false;
            enableMemoryButtons(false);
        }

        function startMemoryGame() {
            if (game8Data.playing) return;
            game8Data.playing = true;
            document.getElementById('game8-start').disabled = true;
            document.getElementById('game8-feedback').classList.remove('show');
            addToSequence();
        }

        function addToSequence() {
            game8Data.sequence.push(memoryColors[Math.floor(Math.random() * 4)]);
            game8Data.playerIndex = 0;
            document.getElementById('game8-level').textContent = game8Data.sequence.length;
            document.getElementById('game8-status').textContent = 'Watch the sequence...';
            enableMemoryButtons(false);
            playSequence();
        }

        function playSequence() {
            let i = 0;
            const interval = setInterval(() => {
                if (i > 0) {
                    highlightButton(game8Data.sequence[i - 1], false);
                }
                if (i < game8Data.sequence.length) {
                    highlightButton(game8Data.sequence[i], true);
                    i++;
                } else {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('game8-status').textContent = 'Your turn! Repeat the sequence';
                        game8Data.canClick = true;
                        enableMemoryButtons(true);
                    }, 300);
                }
            }, 600);
        }

        function highlightButton(color, on) {
            const btn = document.querySelector(`.memory-btn.${color}`);
            if (on) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        }

        function enableMemoryButtons(enabled) {
            document.querySelectorAll('.memory-btn').forEach(btn => {
                btn.disabled = !enabled;
            });
        }

        function memoryClick(color) {
            if (!game8Data.canClick) return;

            highlightButton(color, true);
            setTimeout(() => highlightButton(color, false), 200);

            if (color === game8Data.sequence[game8Data.playerIndex]) {
                game8Data.playerIndex++;

                if (game8Data.playerIndex === game8Data.sequence.length) {
                    // Success! Next level
                    game8Data.canClick = false;
                    document.getElementById('game8-status').textContent = 'Correct! Next level...';
                    setTimeout(() => addToSequence(), 1000);
                }
            } else {
                // Wrong!
                game8Data.canClick = false;
                game8Data.playing = false;
                enableMemoryButtons(false);
                const feedback = document.getElementById('game8-feedback');
                feedback.className = 'feedback show lose';
                feedback.textContent = `âŒ Game Over! You reached level ${game8Data.sequence.length}`;
                document.getElementById('game8-status').textContent = 'Press Reset to try again';
                document.getElementById('game8-start').disabled = false;
            }
        }

        /* ===========================================================
           GAME 9: COLOR PATTERN ROTATION PUZZLE
           =========================================================== */
        let game9Data = { player: [], target: [] };
        const colorClasses = ['c1', 'c2', 'c3', 'c4'];

        function generateGame9() {
            document.getElementById('game9-feedback').classList.remove('show');

            // Generate random target pattern
            const target = [];
            const player = [];
            for (let i = 0; i < 9; i++) {
                target.push(Math.floor(Math.random() * 4));
                player.push(Math.floor(Math.random() * 4));
            }

            game9Data = { player, target };
            renderColorGrids();
        }

        function renderColorGrids() {
            const playerGrid = document.getElementById('game9-player');
            const targetGrid = document.getElementById('game9-target');

            playerGrid.innerHTML = '';
            targetGrid.innerHTML = '';

            game9Data.player.forEach((colorIdx, i) => {
                const tile = document.createElement('div');
                tile.className = `color-tile ${colorClasses[colorIdx]}`;
                tile.onclick = () => rotateColor(i);
                playerGrid.appendChild(tile);
            });

            game9Data.target.forEach(colorIdx => {
                const tile = document.createElement('div');
                tile.className = `color-tile ${colorClasses[colorIdx]}`;
                targetGrid.appendChild(tile);
            });
        }

        function rotateColor(index) {
            game9Data.player[index] = (game9Data.player[index] + 1) % 4;
            renderColorGrids();
        }

        function checkGame9() {
            const feedback = document.getElementById('game9-feedback');
            const match = game9Data.player.every((c, i) => c === game9Data.target[i]);

            if (match) {
                feedback.className = 'feedback show win';
                feedback.textContent = 'ðŸŽ‰ Perfect match! You solved the puzzle!';
            } else {
                feedback.className = 'feedback show lose';
                feedback.textContent = 'âŒ Not quite. Keep rotating to match the target!';
            }
        }

        /* ===========================================================
           GAME 10: LOGIC GRID DETECTIVE PUZZLE
           =========================================================== */
        let game10Data = {};

        const detectivePuzzles = [
            {
                people: ['Alice', 'Bob', 'Carol'],
                items: ['Book', 'Phone', 'Keys'],
                solution: { Alice: 'Phone', Bob: 'Keys', Carol: 'Book' },
                clues: [
                    'Alice does not have the Book',
                    'Bob does not have the Phone',
                    'Carol has the Book'
                ]
            },
            {
                people: ['Dan', 'Eve', 'Frank'],
                items: ['Hat', 'Bag', 'Watch'],
                solution: { Dan: 'Watch', Eve: 'Hat', Frank: 'Bag' },
                clues: [
                    'Dan has the Watch',
                    'Eve does not have the Bag',
                    'Frank does not have the Watch'
                ]
            },
            {
                people: ['Grace', 'Henry', 'Ivy'],
                items: ['Red', 'Blue', 'Green'],
                solution: { Grace: 'Blue', Henry: 'Red', Ivy: 'Green' },
                clues: [
                    'Grace does not have Red',
                    'Henry does not have Green',
                    'Ivy has Green'
                ]
            }
        ];

        function generateGame10() {
            document.getElementById('game10-feedback').classList.remove('show');

            const puzzle = detectivePuzzles[Math.floor(Math.random() * detectivePuzzles.length)];
            game10Data = {
                ...puzzle,
                grid: {} // Will store user's marks
            };

            // Initialize grid
            puzzle.people.forEach(person => {
                game10Data.grid[person] = {};
                puzzle.items.forEach(item => {
                    game10Data.grid[person][item] = 0; // 0=empty, 1=yes, 2=no
                });
            });

            renderDetectiveGrid();
            renderClues();
        }

        function renderClues() {
            const clueList = document.getElementById('game10-clues');
            clueList.innerHTML = game10Data.clues.map(clue => `<li>${clue}</li>`).join('');
        }

        function renderDetectiveGrid() {
            const grid = document.getElementById('game10-grid');
            grid.innerHTML = '';

            const { people, items } = game10Data;

            // Header row
            const emptyHeader = document.createElement('div');
            emptyHeader.className = 'detective-cell header';
            grid.appendChild(emptyHeader);

            items.forEach(item => {
                const header = document.createElement('div');
                header.className = 'detective-cell header';
                header.textContent = item.substring(0, 4);
                header.title = item;
                grid.appendChild(header);
            });

            // Data rows
            people.forEach(person => {
                const nameCell = document.createElement('div');
                nameCell.className = 'detective-cell header';
                nameCell.textContent = person.substring(0, 4);
                nameCell.title = person;
                grid.appendChild(nameCell);

                items.forEach(item => {
                    const cell = document.createElement('div');
                    cell.className = 'detective-cell';
                    cell.dataset.person = person;
                    cell.dataset.item = item;

                    const state = game10Data.grid[person][item];
                    if (state === 1) {
                        cell.classList.add('yes');
                        cell.textContent = 'âœ“';
                    } else if (state === 2) {
                        cell.classList.add('no');
                        cell.textContent = 'âœ—';
                    }

                    cell.onclick = () => toggleDetectiveCell(person, item);
                    grid.appendChild(cell);
                });
            });
        }

        function toggleDetectiveCell(person, item) {
            const current = game10Data.grid[person][item];
            game10Data.grid[person][item] = (current + 1) % 3;
            renderDetectiveGrid();
        }

        function checkGame10() {
            const feedback = document.getElementById('game10-feedback');
            const { people, items, solution, grid } = game10Data;

            let correct = true;
            people.forEach(person => {
                items.forEach(item => {
                    const shouldBeYes = solution[person] === item;
                    const userMarked = grid[person][item];

                    if (shouldBeYes && userMarked !== 1) correct = false;
                    if (!shouldBeYes && userMarked === 1) correct = false;
                });
            });

            if (correct) {
                feedback.className = 'feedback show win';
                feedback.textContent = 'ðŸŽ‰ Case solved! You found all the correct matches!';
            } else {
                feedback.className = 'feedback show lose';
                feedback.textContent = 'âŒ Not quite right. Review the clues and try again!';
            }
        }

        /* ===========================================================
           VIDEO TUTORIAL SIMULATOR
           =========================================================== */
        const tutorials = {
            1: { duration: 15, currentStep: 0 },
            2: { duration: 18, currentStep: 0 },
            3: { duration: 15, currentStep: 0 },
            4: { duration: 12, currentStep: 0 },
            5: { duration: 18, currentStep: 0 },
            6: { duration: 15, currentStep: 0 },
            7: { duration: 18, currentStep: 0 },
            8: { duration: 15, currentStep: 0 },
            9: { duration: 15, currentStep: 0 },
            10: { duration: 18, currentStep: 0 }
        };

        const tutorialState = {};
        for (let i = 1; i <= 10; i++) {
            tutorialState[i] = { playing: false, currentTime: 0, interval: null };
        }

        function startTutorial(n) {
            document.getElementById(`tutorial${n}-overlay`).classList.add('hidden');
            tutorialState[n].playing = true;
            tutorialState[n].currentTime = 0;
            document.getElementById(`tutorial${n}-playpause`).textContent = 'âšâš';
            playTutorial(n);
        }

        function toggleTutorial(n) {
            if (tutorialState[n].playing) {
                pauseTutorial(n);
            } else {
                tutorialState[n].playing = true;
                document.getElementById(`tutorial${n}-playpause`).textContent = 'âšâš';
                document.getElementById(`tutorial${n}-overlay`).classList.add('hidden');
                playTutorial(n);
            }
        }

        function playTutorial(n) {
            if (tutorialState[n].interval) clearInterval(tutorialState[n].interval);

            tutorialState[n].interval = setInterval(() => {
                if (!tutorialState[n].playing) return;

                tutorialState[n].currentTime += 0.1;
                if (tutorialState[n].currentTime >= tutorials[n].duration) {
                    tutorialState[n].currentTime = 0;
                }
                updateTutorialUI(n);
            }, 100);
        }

        function pauseTutorial(n) {
            tutorialState[n].playing = false;
            document.getElementById(`tutorial${n}-playpause`).textContent = 'â–¶';
            if (tutorialState[n].interval) {
                clearInterval(tutorialState[n].interval);
            }
        }

        function seekTutorial(e, n) {
            const bar = e.currentTarget;
            const rect = bar.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            tutorialState[n].currentTime = percent * tutorials[n].duration;
            updateTutorialUI(n);
        }

        function updateTutorialUI(n) {
            const state = tutorialState[n];
            const duration = tutorials[n].duration;
            const progress = (state.currentTime / duration) * 100;

            document.getElementById(`tutorial${n}-progress`).style.width = `${progress}%`;

            const mins = Math.floor(state.currentTime / 60);
            const secs = Math.floor(state.currentTime % 60);
            const totalMins = Math.floor(duration / 60);
            const totalSecs = duration % 60;
            document.getElementById(`tutorial${n}-time`).textContent =
                `${mins}:${secs.toString().padStart(2, '0')} / ${totalMins}:${totalSecs.toString().padStart(2, '0')}`;

            renderTutorialContent(n, state.currentTime);
        }

        function renderTutorialContent(n, time) {
            const content = document.getElementById(`tutorial${n}-content`);

            if (n === 1) renderTutorial1(content, time);
            else if (n === 2) renderTutorial2(content, time);
            else if (n === 3) renderTutorial3(content, time);
            else if (n === 4) renderTutorial4(content, time);
            else if (n === 5) renderTutorial5(content, time);
            else if (n === 6) renderTutorial6(content, time);
            else if (n === 7) renderTutorial7(content, time);
            else if (n === 8) renderTutorial8(content, time);
            else if (n === 9) renderTutorial9(content, time);
            else if (n === 10) renderTutorial10(content, time);
        }

        // Tutorial 1: Number Pattern
        function renderTutorial1(container, time) {
            const sequence = [3, 6, 9, '?', 15, 18];
            const answer = 12;
            let step, caption, hint;

            if (time < 3) {
                step = 1; caption = "Let's solve a Number Pattern!"; hint = "Look at the sequence of numbers";
            } else if (time < 6) {
                step = 2; caption = "Step 1: Find the differences"; hint = "Calculate: 6-3=3, 9-6=3...";
            } else if (time < 9) {
                step = 3; caption = "Step 2: The pattern is +3!"; hint = "Each number increases by 3";
            } else if (time < 12) {
                step = 4; caption = "Step 3: Apply the pattern"; hint = "9 + 3 = ?";
            } else {
                step = 5; caption = "Answer: 12! ðŸŽ‰"; hint = "The missing number is 12";
            }

            const highlight = step >= 2 && step < 5 ? [0,1,2] : step >= 4 ? [3] : [];
            const solved = step >= 5;

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div class="demo-items">
                        ${sequence.map((n, i) => `
                            <div class="demo-item ${highlight.includes(i) ? 'highlight' : ''} ${solved && i === 3 ? 'solved' : ''}">
                                ${solved && n === '?' ? answer : n}
                            </div>
                        `).join('')}
                    </div>
                    ${step === 2 ? '<div class="demo-arrow">â†“ +3 â†“ +3 â†“</div>' : ''}
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 2: Symbol Decoder
        function renderTutorial2(container, time) {
            let step, caption, hint;

            if (time < 3.6) {
                step = 1; caption = "Symbol Decoder Challenge!"; hint = "Find what each symbol represents";
            } else if (time < 7.2) {
                step = 2; caption = "Step 1: Start with ðŸ”´ + ðŸ”´ = 10"; hint = "If two reds equal 10, one red = ?";
            } else if (time < 10.8) {
                step = 3; caption = "ðŸ”´ = 5 âœ“"; hint = "Now use this to find ðŸ”µ";
            } else if (time < 14.4) {
                step = 4; caption = "Step 2: ðŸ”´ + ðŸ”µ = 12, so 5 + ðŸ”µ = 12"; hint = "ðŸ”µ = 12 - 5 = 7";
            } else {
                step = 5; caption = "Solved! ðŸ”´=5, ðŸ”µ=7, ðŸŸ¢=3 ðŸŽ‰"; hint = "Use substitution to solve!";
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="font-size: 1.2rem; margin: 1rem 0;">
                        <div class="${step >= 2 ? 'highlight' : ''}" style="padding: 0.5rem; border-radius: 8px; margin: 0.3rem; display: inline-block;">
                            ðŸ”´ + ðŸ”´ = 10 ${step >= 3 ? 'â†’ ðŸ”´ = 5 âœ“' : ''}
                        </div>
                        <div class="${step >= 4 ? 'highlight' : ''}" style="padding: 0.5rem; border-radius: 8px; margin: 0.3rem; display: inline-block;">
                            ðŸ”´ + ðŸ”µ = 12 ${step >= 5 ? 'â†’ ðŸ”µ = 7 âœ“' : ''}
                        </div>
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 3: Equation Logic
        function renderTutorial3(container, time) {
            let step, caption, hint;

            if (time < 3) {
                step = 1; caption = "Complete the Equation!"; hint = "Find what makes it true";
            } else if (time < 6) {
                step = 2; caption = "8 ? 2 = 16"; hint = "Test each operator: +, -, Ã—, Ã·";
            } else if (time < 9) {
                step = 3; caption = "Testing: 8 + 2 = 10 âŒ"; hint = "Addition doesn't work";
            } else if (time < 12) {
                step = 4; caption = "Testing: 8 Ã— 2 = 16 âœ“"; hint = "Multiplication works!";
            } else {
                step = 5; caption = "Answer: Ã— (multiply) ðŸŽ‰"; hint = "8 Ã— 2 = 16";
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div class="demo-items">
                        <div class="demo-item">8</div>
                        <div class="demo-item ${step >= 4 ? 'solved' : 'highlight'}">${step >= 5 ? 'Ã—' : '?'}</div>
                        <div class="demo-item">2</div>
                        <div class="demo-item">=</div>
                        <div class="demo-item">16</div>
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 4: Odd One Out
        function renderTutorial4(container, time) {
            const items = ['Apple', 'Banana', 'Carrot', 'Orange'];
            let step, caption, hint, highlighted;

            if (time < 2.4) {
                step = 1; caption = "Find the Odd One Out!"; hint = "One item doesn't belong"; highlighted = -1;
            } else if (time < 4.8) {
                step = 2; caption = "Look at each item..."; hint = "What do most have in common?"; highlighted = 0;
            } else if (time < 7.2) {
                step = 3; caption = "Apple, Banana, Orange = Fruits"; hint = "These are all fruits"; highlighted = -1;
            } else if (time < 9.6) {
                step = 4; caption = "Carrot is a vegetable!"; hint = "It doesn't fit the fruit category"; highlighted = 2;
            } else {
                step = 5; caption = "Answer: Carrot ðŸŽ‰"; hint = "Carrot is the odd one out (vegetable)"; highlighted = 2;
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div class="demo-items" style="gap: 15px;">
                        ${items.map((item, i) => `
                            <div class="demo-item ${i === highlighted ? (step >= 5 ? 'solved' : 'highlight') : ''}" style="min-width: 80px;">
                                ${item}
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 5: Grid Deduction
        function renderTutorial5(container, time) {
            let step, caption, hint;
            const grid = [0,0,0,0,0,0,0,0,0];
            let highlights = [];

            if (time < 3.6) {
                step = 1; caption = "Grid Deduction Puzzle!"; hint = "Use clues to mark cells";
            } else if (time < 7.2) {
                step = 2; caption = "Clue: Row 1 has 2 marks"; hint = "Mark 2 cells in row 1";
                highlights = [0, 1, 2];
            } else if (time < 10.8) {
                step = 3; caption = "Applying Row 1 clue..."; hint = "Two cells marked in row 1";
                grid[0] = 1; grid[2] = 1;
                highlights = [0, 2];
            } else if (time < 14.4) {
                step = 4; caption = "Clue: Column 1 has 1 mark"; hint = "Cell (1,1) is already marked!";
                grid[0] = 1; grid[2] = 1;
                highlights = [0, 3, 6];
            } else {
                step = 5; caption = "Puzzle Solved! ðŸŽ‰"; hint = "Cross-reference all clues";
                grid[0] = 1; grid[2] = 1; grid[4] = 1;
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="display: grid; grid-template-columns: repeat(3, 50px); gap: 8px; justify-content: center;">
                        ${grid.map((cell, i) => `
                            <div style="width: 50px; height: 50px; background: ${highlights.includes(i) ? 'rgba(255,215,0,0.3)' : 'rgba(255,255,255,0.1)'};
                                border: 2px solid ${cell === 1 ? '#28a745' : 'rgba(255,255,255,0.2)'};
                                border-radius: 8px; display: flex; align-items: center; justify-content: center;
                                color: #28a745; font-size: 1.2rem; font-weight: bold;">
                                ${cell === 1 ? 'âœ“' : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 6: Path Finder Maze
        function renderTutorial6(container, time) {
            let step, caption, hint;
            const mazeDemo = ['S', 'â†’', 'â†“', 'â–“', 'â–“', 'â–“', 'â†“', 'â†’', 'â†“', 'â–“', 'â–“', 'â–“', 'â†’', 'â†’', 'E'];
            let currentPos = 0;

            if (time < 3) {
                step = 1; caption = "Path Finder Maze!"; hint = "Navigate from S to E"; currentPos = 0;
            } else if (time < 6) {
                step = 2; caption = "Start at 'S' (green cell)"; hint = "Click adjacent cells to move"; currentPos = 0;
            } else if (time < 9) {
                step = 3; caption = "Move right, following arrows"; hint = "Avoid dark walls!"; currentPos = 1;
            } else if (time < 12) {
                step = 4; caption = "Continue down and right..."; hint = "Plan your path ahead"; currentPos = 7;
            } else {
                step = 5; caption = "Reached the End! ðŸŽ‰"; hint = "You found the path!"; currentPos = 14;
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="display: grid; grid-template-columns: repeat(5, 40px); gap: 4px; justify-content: center;">
                        ${mazeDemo.map((cell, i) => {
                            let bg = 'rgba(255,255,255,0.1)';
                            if (cell === 'S') bg = '#28a745';
                            else if (cell === 'E') bg = 'linear-gradient(135deg, #ffd700, #ff6b6b)';
                            else if (cell === 'â–“') bg = 'rgba(0,0,0,0.5)';
                            if (i === currentPos && cell !== 'S' && cell !== 'E') bg = 'rgba(102, 126, 234, 0.7)';
                            return `<div style="width: 40px; height: 40px; background: ${bg}; border-radius: 6px;
                                display: flex; align-items: center; justify-content: center; font-size: 1rem;
                                ${i === currentPos ? 'box-shadow: 0 0 10px #ffd700;' : ''}">${cell}</div>`;
                        }).join('')}
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 7: Word Deduction
        function renderTutorial7(container, time) {
            let step, caption, hint;
            const word = 'BRAIN';
            let guess = ['', '', '', '', ''];
            let states = ['', '', '', '', ''];

            if (time < 3.6) {
                step = 1; caption = "Word Deduction Game!"; hint = "Guess the 5-letter word";
            } else if (time < 7.2) {
                step = 2; caption = "Type your first guess"; hint = "Try 'CRANE' - it has common letters";
                guess = ['C', 'R', 'A', 'N', 'E']; states = ['absent', 'present', 'present', 'present', 'absent'];
            } else if (time < 10.8) {
                step = 3; caption = "Yellow = right letter, wrong spot"; hint = "R, A, N are in the word!";
                guess = ['C', 'R', 'A', 'N', 'E']; states = ['absent', 'present', 'present', 'present', 'absent'];
            } else if (time < 14.4) {
                step = 4; caption = "Try 'BRAIN' with those letters"; hint = "Rearrange the yellow letters";
                guess = ['B', 'R', 'A', 'I', 'N']; states = ['correct', 'correct', 'correct', 'correct', 'correct'];
            } else {
                step = 5; caption = "BRAIN is correct! ðŸŽ‰"; hint = "Use feedback to find the word!";
                guess = ['B', 'R', 'A', 'I', 'N']; states = ['correct', 'correct', 'correct', 'correct', 'correct'];
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="display: flex; gap: 6px; justify-content: center;">
                        ${guess.map((l, i) => {
                            let bg = 'rgba(255,255,255,0.1)';
                            if (states[i] === 'correct') bg = '#28a745';
                            else if (states[i] === 'present') bg = '#ffc107';
                            else if (states[i] === 'absent') bg = '#666';
                            return `<div style="width: 45px; height: 45px; background: ${bg}; border-radius: 8px;
                                display: flex; align-items: center; justify-content: center; font-size: 1.3rem;
                                font-weight: bold; color: ${states[i] === 'present' ? '#1a1a2e' : '#fff'}">${l}</div>`;
                        }).join('')}
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 8: Memory Sequence
        function renderTutorial8(container, time) {
            let step, caption, hint;
            let active = '';

            if (time < 3) {
                step = 1; caption = "Memory Sequence!"; hint = "Watch and repeat the pattern";
            } else if (time < 6) {
                step = 2; caption = "Watch: Red lights up"; hint = "Remember this color"; active = 'red';
            } else if (time < 9) {
                step = 3; caption = "Watch: Blue lights up"; hint = "Remember: Red, Blue"; active = 'blue';
            } else if (time < 12) {
                step = 4; caption = "Your turn! Click: Red, Blue"; hint = "Repeat in the same order";
            } else {
                step = 5; caption = "Correct! Level Up! ðŸŽ‰"; hint = "Each level adds one more color";
            }

            const colors = [
                { name: 'red', color: '#e74c3c' },
                { name: 'blue', color: '#3498db' },
                { name: 'green', color: '#2ecc71' },
                { name: 'yellow', color: '#f1c40f' }
            ];

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="display: grid; grid-template-columns: repeat(2, 60px); gap: 10px; justify-content: center;">
                        ${colors.map(c => `
                            <div style="width: 60px; height: 60px; background: ${c.color}; border-radius: 12px;
                                opacity: ${c.name === active ? '1' : '0.5'};
                                ${c.name === active ? 'box-shadow: 0 0 20px ' + c.color + '; transform: scale(1.1);' : ''}
                                transition: all 0.3s;"></div>
                        `).join('')}
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 9: Color Pattern Rotation
        function renderTutorial9(container, time) {
            let step, caption, hint;
            const colors = ['#e74c3c', '#3498db', '#2ecc71', '#9b59b6'];
            let player = [0, 0, 0, 0];
            const target = [1, 2, 0, 3];

            if (time < 3) {
                step = 1; caption = "Color Pattern Rotation!"; hint = "Match your grid to the target";
            } else if (time < 6) {
                step = 2; caption = "Click tiles to rotate colors"; hint = "Red â†’ Blue â†’ Green â†’ Purple";
                player = [0, 0, 0, 0];
            } else if (time < 9) {
                step = 3; caption = "Rotating first tile..."; hint = "Each click cycles the color";
                player = [1, 0, 0, 0];
            } else if (time < 12) {
                step = 4; caption = "Keep rotating to match"; hint = "Almost there!";
                player = [1, 2, 0, 0];
            } else {
                step = 5; caption = "Perfect Match! ðŸŽ‰"; hint = "All tiles match the target!";
                player = [1, 2, 0, 3];
            }

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="display: flex; gap: 2rem; justify-content: center; align-items: center;">
                        <div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem; color: #ffd700;">Your Grid</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 40px); gap: 4px;">
                                ${player.map(c => `<div style="width: 40px; height: 40px; background: ${colors[c]}; border-radius: 6px;"></div>`).join('')}
                            </div>
                        </div>
                        <div style="font-size: 1.5rem;">â†’</div>
                        <div>
                            <div style="font-size: 0.8rem; margin-bottom: 0.5rem; color: #ffd700;">Target</div>
                            <div style="display: grid; grid-template-columns: repeat(2, 40px); gap: 4px;">
                                ${target.map(c => `<div style="width: 40px; height: 40px; background: ${colors[c]}; border-radius: 6px;"></div>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        // Tutorial 10: Logic Grid Detective
        function renderTutorial10(container, time) {
            let step, caption, hint;
            const grid = [[0,0,0], [0,0,0], [0,0,0]]; // 0=empty, 1=yes, 2=no

            if (time < 3.6) {
                step = 1; caption = "Logic Grid Detective!"; hint = "Match people to items using clues";
            } else if (time < 7.2) {
                step = 2; caption = "Clue: Carol has the Book"; hint = "Mark âœ“ for Carol-Book";
                grid[2][0] = 1; // Carol-Book = yes
            } else if (time < 10.8) {
                step = 3; caption = "If Carol has Book..."; hint = "Others don't have Book";
                grid[2][0] = 1; grid[0][0] = 2; grid[1][0] = 2;
            } else if (time < 14.4) {
                step = 4; caption = "Use more clues to solve"; hint = "Process of elimination";
                grid[2][0] = 1; grid[0][0] = 2; grid[1][0] = 2;
                grid[0][1] = 1; grid[1][2] = 1;
            } else {
                step = 5; caption = "Case Solved! ðŸŽ‰"; hint = "All matches found!";
                grid[2][0] = 1; grid[0][1] = 1; grid[1][2] = 1;
                grid[0][0] = 2; grid[0][2] = 2; grid[1][0] = 2; grid[1][1] = 2; grid[2][1] = 2; grid[2][2] = 2;
            }

            const people = ['Alice', 'Bob', 'Carol'];
            const items = ['Book', 'Phone', 'Keys'];

            container.innerHTML = `
                <div class="tutorial-step">Step ${step} of 5</div>
                <div class="tutorial-caption">${caption}</div>
                <div class="tutorial-demo">
                    <div style="display: grid; grid-template-columns: repeat(4, 45px); gap: 2px; justify-content: center;">
                        <div style="width: 45px; height: 30px;"></div>
                        ${items.map(i => `<div style="width: 45px; height: 30px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; background: rgba(102,126,234,0.3); border-radius: 4px;">${i.substring(0,4)}</div>`).join('')}
                        ${people.map((p, pi) => `
                            <div style="width: 45px; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; background: rgba(102,126,234,0.3); border-radius: 4px;">${p.substring(0,4)}</div>
                            ${items.map((_, ii) => {
                                const state = grid[pi][ii];
                                let bg = 'rgba(0,0,0,0.3)';
                                let text = '';
                                if (state === 1) { bg = '#28a745'; text = 'âœ“'; }
                                else if (state === 2) { bg = 'rgba(220,53,69,0.5)'; text = 'âœ—'; }
                                return `<div style="width: 45px; height: 35px; display: flex; align-items: center; justify-content: center; background: ${bg}; border-radius: 4px; font-weight: bold;">${text}</div>`;
                            }).join('')}
                        `).join('')}
                    </div>
                </div>
                <div class="tutorial-hint">${hint}</div>
            `;
        }

        /* ===========================================================
           PWA - DYNAMIC MANIFEST GENERATION
           =========================================================== */
        const PWA_VERSION = '2.0.0';
        const CACHE_NAME = `logic-puzzle-master-v${PWA_VERSION}`;

        // Generate app icons as base64 SVG data URLs
        function generateIconDataUrl(size) {
            const svg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${size} ${size}">
                <defs>
                    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#0f0c29"/>
                        <stop offset="50%" style="stop-color:#302b63"/>
                        <stop offset="100%" style="stop-color:#24243e"/>
                    </linearGradient>
                </defs>
                <rect fill="url(#bg)" width="${size}" height="${size}" rx="${size * 0.2}"/>
                <text x="50%" y="58%" font-size="${size * 0.6}" text-anchor="middle" dominant-baseline="middle">ðŸ§©</text>
            </svg>`;
            return 'data:image/svg+xml;base64,' + btoa(svg);
        }

        // Create manifest object
        const manifestData = {
            name: "Logic Puzzle Master - Brain Training Games",
            short_name: "Logic Puzzle",
            description: "Train your brain with 10+ unique logic puzzle games. Play offline, no downloads required!",
            start_url: window.location.pathname,
            scope: window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/') + 1) || '/',
            display: "standalone",
            orientation: "any",
            background_color: "#0f0c29",
            theme_color: "#0f0c29",
            categories: ["games", "education", "entertainment", "puzzle"],
            lang: "en",
            dir: "ltr",
            icons: [
                { src: generateIconDataUrl(72), sizes: "72x72", type: "image/svg+xml", purpose: "any" },
                { src: generateIconDataUrl(96), sizes: "96x96", type: "image/svg+xml", purpose: "any" },
                { src: generateIconDataUrl(128), sizes: "128x128", type: "image/svg+xml", purpose: "any" },
                { src: generateIconDataUrl(144), sizes: "144x144", type: "image/svg+xml", purpose: "any" },
                { src: generateIconDataUrl(152), sizes: "152x152", type: "image/svg+xml", purpose: "any" },
                { src: generateIconDataUrl(192), sizes: "192x192", type: "image/svg+xml", purpose: "any maskable" },
                { src: generateIconDataUrl(384), sizes: "384x384", type: "image/svg+xml", purpose: "any" },
                { src: generateIconDataUrl(512), sizes: "512x512", type: "image/svg+xml", purpose: "any maskable" }
            ],
            screenshots: [],
            shortcuts: [
                {
                    name: "Number Pattern",
                    short_name: "Numbers",
                    description: "Play Number Pattern Puzzle",
                    url: window.location.pathname + "#game1"
                },
                {
                    name: "Word Deduction",
                    short_name: "Words",
                    description: "Play Word Deduction Game",
                    url: window.location.pathname + "#game7"
                },
                {
                    name: "Memory Challenge",
                    short_name: "Memory",
                    description: "Play Memory Sequence",
                    url: window.location.pathname + "#game8"
                }
            ],
            related_applications: [],
            prefer_related_applications: false
        };

        // Create and inject manifest dynamically
        function injectManifest() {
            const manifestBlob = new Blob([JSON.stringify(manifestData)], { type: 'application/json' });
            const manifestUrl = URL.createObjectURL(manifestBlob);

            // Remove any existing manifest link
            const existingManifest = document.querySelector('link[rel="manifest"]');
            if (existingManifest) {
                existingManifest.remove();
            }

            // Create and add new manifest link
            const manifestLink = document.createElement('link');
            manifestLink.rel = 'manifest';
            manifestLink.href = manifestUrl;
            document.head.appendChild(manifestLink);

            console.log('PWA Manifest injected dynamically');
        }

        /* ===========================================================
           PWA - DYNAMIC SERVICE WORKER GENERATION
           =========================================================== */
        const serviceWorkerCode = `
            // Logic Puzzle Master Service Worker v${PWA_VERSION}
            const CACHE_NAME = '${CACHE_NAME}';
            const OFFLINE_URL = '${window.location.pathname}';

            // Files to cache immediately
            const PRECACHE_URLS = [
                OFFLINE_URL,
                '${window.location.href}'
            ];

            // Install event - cache core files
            self.addEventListener('install', (event) => {
                console.log('[SW] Installing Service Worker v${PWA_VERSION}');
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then((cache) => {
                            console.log('[SW] Caching app shell');
                            return cache.addAll(PRECACHE_URLS);
                        })
                        .then(() => {
                            console.log('[SW] Skip waiting');
                            return self.skipWaiting();
                        })
                );
            });

            // Activate event - clean up old caches
            self.addEventListener('activate', (event) => {
                console.log('[SW] Activating Service Worker v${PWA_VERSION}');
                event.waitUntil(
                    caches.keys().then((cacheNames) => {
                        return Promise.all(
                            cacheNames.map((cacheName) => {
                                if (cacheName !== CACHE_NAME) {
                                    console.log('[SW] Deleting old cache:', cacheName);
                                    return caches.delete(cacheName);
                                }
                            })
                        );
                    }).then(() => {
                        console.log('[SW] Claiming clients');
                        return self.clients.claim();
                    }).then(() => {
                        // Notify all clients about the update
                        self.clients.matchAll().then(clients => {
                            clients.forEach(client => {
                                client.postMessage({ type: 'SW_UPDATED', version: '${PWA_VERSION}' });
                            });
                        });
                    })
                );
            });

            // Fetch event - cache-first strategy with network fallback
            self.addEventListener('fetch', (event) => {
                // Skip non-GET requests
                if (event.request.method !== 'GET') return;

                // Skip chrome-extension and other non-http(s) requests
                if (!event.request.url.startsWith('http')) return;

                event.respondWith(
                    caches.match(event.request)
                        .then((cachedResponse) => {
                            if (cachedResponse) {
                                // Return cached version and update cache in background
                                event.waitUntil(
                                    fetch(event.request)
                                        .then((networkResponse) => {
                                            if (networkResponse && networkResponse.status === 200) {
                                                caches.open(CACHE_NAME).then((cache) => {
                                                    cache.put(event.request, networkResponse.clone());
                                                });
                                            }
                                        })
                                        .catch(() => {})
                                );
                                return cachedResponse;
                            }

                            // No cache, fetch from network
                            return fetch(event.request)
                                .then((networkResponse) => {
                                    if (!networkResponse || networkResponse.status !== 200) {
                                        return networkResponse;
                                    }

                                    // Cache the new response
                                    const responseToCache = networkResponse.clone();
                                    caches.open(CACHE_NAME).then((cache) => {
                                        cache.put(event.request, responseToCache);
                                    });

                                    return networkResponse;
                                })
                                .catch(() => {
                                    // Network failed, return offline page for navigation requests
                                    if (event.request.mode === 'navigate') {
                                        return caches.match(OFFLINE_URL);
                                    }
                                    return new Response('Offline', { status: 503, statusText: 'Service Unavailable' });
                                });
                        })
                );
            });

            // Handle messages from the main thread
            self.addEventListener('message', (event) => {
                if (event.data && event.data.type === 'SKIP_WAITING') {
                    self.skipWaiting();
                }
                if (event.data && event.data.type === 'GET_VERSION') {
                    event.ports[0].postMessage({ version: '${PWA_VERSION}' });
                }
            });
        `;

        // Register service worker dynamically using Blob URL
        let swRegistration = null;
        let newWorkerWaiting = null;

        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                // Create Blob URL for service worker
                const swBlob = new Blob([serviceWorkerCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(swBlob);

                navigator.serviceWorker.register(swUrl, { scope: './' })
                    .then((registration) => {
                        swRegistration = registration;
                        console.log('[PWA] Service Worker registered successfully');

                        // Check for updates periodically
                        setInterval(() => {
                            registration.update();
                        }, 60000); // Check every minute

                        // Handle updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('[PWA] New Service Worker found');

                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New version available
                                    newWorkerWaiting = newWorker;
                                    showUpdateNotification();
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('[PWA] Service Worker registration failed:', error);
                    });

                // Listen for messages from service worker
                navigator.serviceWorker.addEventListener('message', (event) => {
                    if (event.data && event.data.type === 'SW_UPDATED') {
                        console.log('[PWA] Service Worker updated to version:', event.data.version);
                    }
                });

                // Handle controller change (new SW activated)
                navigator.serviceWorker.addEventListener('controllerchange', () => {
                    console.log('[PWA] New Service Worker activated');
                });
            }
        }

        /* ===========================================================
           PWA - INSTALLATION HANDLING
           =========================================================== */
        let deferredPrompt = null;
        let installBannerDismissed = localStorage.getItem('pwaInstallDismissed') === 'true';

        // Listen for the beforeinstallprompt event
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('[PWA] beforeinstallprompt fired');
            e.preventDefault();
            deferredPrompt = e;

            // Show install UI elements
            showInstallUI();
        });

        // Show install UI (both header button and banner)
        function showInstallUI() {
            // Show header button
            const headerBtn = document.getElementById('pwaInstallBtn');
            if (headerBtn) {
                headerBtn.classList.add('show');
            }

            // Show banner if not dismissed
            if (!installBannerDismissed) {
                const banner = document.getElementById('pwaInstallBanner');
                if (banner) {
                    banner.classList.add('show');
                }
            }
        }

        // Hide install UI
        function hideInstallUI() {
            const headerBtn = document.getElementById('pwaInstallBtn');
            const banner = document.getElementById('pwaInstallBanner');

            if (headerBtn) headerBtn.classList.remove('show');
            if (banner) banner.classList.remove('show');
        }

        // Handle install button click
        function installPWA() {
            if (!deferredPrompt) {
                // Show manual instructions for browsers that don't support beforeinstallprompt
                showManualInstallInstructions();
                return;
            }

            console.log('[PWA] Showing install prompt');
            deferredPrompt.prompt();

            deferredPrompt.userChoice.then((choiceResult) => {
                console.log('[PWA] User choice:', choiceResult.outcome);

                if (choiceResult.outcome === 'accepted') {
                    console.log('[PWA] User accepted the install prompt');
                    hideInstallUI();
                }

                deferredPrompt = null;
            });
        }

        // Show manual installation instructions
        function showManualInstallInstructions() {
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            const isChrome = /Chrome/.test(navigator.userAgent) && !/Edge|Edg/.test(navigator.userAgent);
            const isFirefox = /Firefox/.test(navigator.userAgent);
            const isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);

            let instructions = 'To install this app:\n\n';

            if (isIOS) {
                instructions += '1. Tap the Share button (ðŸ“¤) at the bottom\n';
                instructions += '2. Scroll down and tap "Add to Home Screen"\n';
                instructions += '3. Tap "Add" in the top right';
            } else if (isAndroid && isChrome) {
                instructions += '1. Tap the menu (â‹®) in the top right\n';
                instructions += '2. Tap "Add to Home screen"\n';
                instructions += '3. Tap "Add" to confirm';
            } else if (isFirefox) {
                instructions += '1. Tap the menu (â‹®)\n';
                instructions += '2. Tap "Install" or look for the home icon';
            } else if (isSafari) {
                instructions += '1. Click the Share button\n';
                instructions += '2. Select "Add to Dock" or "Add to Home Screen"';
            } else {
                instructions += 'â€¢ Chrome/Edge: Click menu (â‹®) â†’ "Install App"\n';
                instructions += 'â€¢ Safari: Share â†’ "Add to Home Screen"\n';
                instructions += 'â€¢ Firefox: Look for install option in address bar';
            }

            alert(instructions);
        }

        // Dismiss install banner
        function dismissInstallBanner() {
            const banner = document.getElementById('pwaInstallBanner');
            if (banner) {
                banner.classList.remove('show');
            }
            localStorage.setItem('pwaInstallDismissed', 'true');
            installBannerDismissed = true;
        }

        // Handle app installed event
        window.addEventListener('appinstalled', () => {
            console.log('[PWA] App was installed successfully');
            hideInstallUI();
            deferredPrompt = null;

            // Show success message
            showOfflineIndicator('App installed successfully!', true);
            setTimeout(hideOfflineIndicator, 3000);
        });

        /* ===========================================================
           PWA - OFFLINE/ONLINE STATUS HANDLING
           =========================================================== */
        function showOfflineIndicator(message = "You're offline", isOnline = false) {
            const indicator = document.getElementById('offlineIndicator');
            const icon = document.getElementById('offlineIcon');
            const text = document.getElementById('offlineText');

            if (indicator && icon && text) {
                icon.textContent = isOnline ? 'âœ…' : 'ðŸ“¡';
                text.textContent = message;
                indicator.classList.toggle('online', isOnline);
                indicator.classList.add('show');
            }
        }

        function hideOfflineIndicator() {
            const indicator = document.getElementById('offlineIndicator');
            if (indicator) {
                indicator.classList.remove('show');
            }
        }

        // Monitor online/offline status
        window.addEventListener('online', () => {
            console.log('[PWA] Back online');
            showOfflineIndicator("You're back online!", true);
            setTimeout(hideOfflineIndicator, 3000);
        });

        window.addEventListener('offline', () => {
            console.log('[PWA] Gone offline');
            showOfflineIndicator("You're offline - Don't worry, the app still works!");
        });

        /* ===========================================================
           PWA - UPDATE HANDLING
           =========================================================== */
        function showUpdateNotification() {
            const notification = document.getElementById('updateNotification');
            if (notification) {
                notification.classList.add('show');
            }
        }

        function updateApp() {
            if (newWorkerWaiting) {
                newWorkerWaiting.postMessage({ type: 'SKIP_WAITING' });
            }
            dismissUpdate();

            // Reload after a short delay to allow SW to activate
            setTimeout(() => {
                window.location.reload();
            }, 500);
        }

        function dismissUpdate() {
            const notification = document.getElementById('updateNotification');
            if (notification) {
                notification.classList.remove('show');
            }
        }

        /* ===========================================================
           PWA - CHECK IF RUNNING AS INSTALLED APP
           =========================================================== */
        function isRunningAsPWA() {
            return window.matchMedia('(display-mode: standalone)').matches ||
                   window.navigator.standalone === true ||
                   document.referrer.includes('android-app://');
        }

        /* ===========================================================
           INITIALIZATION
           =========================================================== */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('[App] Initializing Logic Puzzle Master v' + PWA_VERSION);

            // Inject manifest
            injectManifest();

            // Register service worker
            registerServiceWorker();

            // Check if running as PWA - hide install UI if so
            if (isRunningAsPWA()) {
                console.log('[PWA] Running as installed app');
                hideInstallUI();
            }

            // Check initial online status
            if (!navigator.onLine) {
                showOfflineIndicator();
            }

            // Pre-generate first game content
            generateGame1();
        });
    </script>
</body>
</html>
